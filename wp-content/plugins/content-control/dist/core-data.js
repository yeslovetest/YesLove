!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{LICENSE_STORE:function(){return I},RESTRICTION_STORE:function(){return ct},SETTINGS_STORE:function(){return ge},Status:function(){return v},URL_SEARCH_STORE:function(){return an},appendUrlParams:function(){return f},fetch:function(){return p},fetchCredOpts:function(){return g},fetchWithCreds:function(){return T},getErrorMessage:function(){return A},licenseDefaults:function(){return m},licenseStore:function(){return Se},restBase:function(){return S},restUrl:function(){return _},restrictionDefaults:function(){return ut},restrictionsStore:function(){return on},settingsDefaults:function(){return Te},settingsStore:function(){return tt},urlSearchStore:function(){return Pn},useLicense:function(){return kn},useSettings:function(){return xn},validateRestriction:function(){return it}});var n={};e.r(n),e.d(n,{activateLicense:function(){return V},changeActionStatus:function(){return x},checkLicenseStatus:function(){return F},deactivateLicense:function(){return Y},hydrate:function(){return j},removeLicense:function(){return M},updateLicenseKey:function(){return B}});var r={};e.r(r),e.d(r,{getLicenseData:function(){return ne},getLicenseKey:function(){return re},getLicenseStatus:function(){return se}});var s={};e.r(s),e.d(s,{getConnectInfo:function(){return ae},getDispatchError:function(){return Ee},getDispatchStatus:function(){return ue},getLicenseData:function(){return ie},getLicenseKey:function(){return ce},getLicenseStatus:function(){return oe},hasDispatched:function(){return le},isDispatching:function(){return de}});var i={};e.r(i),e.d(i,{changeActionStatus:function(){return Ne},hydrate:function(){return Le},hydrateBlockTypes:function(){return He},saveSettings:function(){return me},stageUnsavedChanges:function(){return Oe},updateSettings:function(){return De}});var c={};e.r(c),e.d(c,{getKnownBlockTypes:function(){return Be},getSettings:function(){return Fe}});var o={};e.r(o),e.d(o,{getDispatchError:function(){return et},getDispatchStatus:function(){return Xe},getExcludedBlocks:function(){return We},getKnownBlockTypes:function(){return je},getReqPermission:function(){return Je},getSetting:function(){return Qe},getSettings:function(){return Me},getUnsavedChanges:function(){return $e},hasDispatched:function(){return Ze},hasUnsavedChanges:function(){return qe},isDispatching:function(){return ze}});var a={};e.r(a),e.d(a,{addNotice:function(){return Ct},changeActionStatus:function(){return ht},changeEditorId:function(){return It},clearEditorData:function(){return Dt},clearNotice:function(){return Rt},clearNotices:function(){return vt},createRestriction:function(){return mt},deleteRestriction:function(){return Lt},hydrate:function(){return Ht},updateEditorValues:function(){return Nt},updateRestriction:function(){return Ot}});var u={};e.r(u),e.d(u,{getRestriction:function(){return $t},getRestrictions:function(){return Qt}});var d={};e.r(d),e.d(d,{getDispatchError:function(){return cn},getDispatchStatus:function(){return nn},getEditorId:function(){return zt},getEditorValues:function(){return Zt},getNextPriority:function(){return en},getNotices:function(){return qt},getRestriction:function(){return Jt},getRestrictionDefaults:function(){return tn},getRestrictions:function(){return Wt},hasDispatched:function(){return sn},isDispatching:function(){return rn},isEditorActive:function(){return Xt}});var l={};e.r(l),e.d(l,{changeActionStatus:function(){return In},searchError:function(){return vn},searchRequest:function(){return Cn},searchSuccess:function(){return Rn},updateSuggestions:function(){return hn}});var E={};e.r(E),e.d(E,{getDispatchError:function(){return bn},getDispatchStatus:function(){return Hn},getSuggestions:function(){return Ln},hasDispatched:function(){return wn},isDispatching:function(){return Un}});const S="content-control/v2",_=`${wpApiSettings.root}${S}/`,g=(e={})=>({...e,headers:{...e.headers,"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},credentials:"same-origin"}),p=(e,t={})=>(t.body&&(t.body=JSON.stringify(t.body)),wpApiSettings.root.includes("?")&&(e=e.replace("?","&")),{type:"FETCH",path:`${wpApiSettings.root}${e}`,options:g(t)}),T=(e,t)=>new Promise(((n,r)=>{window.fetch(e,g(t)).then((e=>e.json())).then((e=>n(e))).catch((e=>r(e)))}));var y={FETCH({path:e,options:t}){return new Promise(((n,r)=>{window.fetch(e,t).then((e=>e.json())).then((e=>n(e))).catch((e=>r(e)))}))}};const f=(e,t)=>{const n=Object.fromEntries(Object.entries(t).filter((([,e])=>!!e)));return`${e}?${new URLSearchParams({...n})}`},A=e=>e instanceof Error?e.message:String(e);var h=window.wp.data,C=window.wp.dataControls,R=window.wp.i18n;let v=function(e){return e.Idle="IDLE",e.Resolving="RESOLVING",e.Error="ERROR",e.Success="SUCCESS",e}({});const I="content-control/license",N={ACTIVATE_LICENSE:"ACTIVATE_LICENSE",CONNECT_SITE:"CONNECT_SITE",DEACTIVATE_LICENSE:"DEACTIVATE_LICENSE",REMOVE_LICENSE:"REMOVE_LICENSE",UPDATE_LICENSE_KEY:"UPDATE_LICENSE_KEY",CHECK_LICENSE_STATUS:"CHECK_LICENSE_STATUS",CHANGE_ACTION_STATUS:"CHANGE_ACTION_STATUS",HYDRATE_LICENSE_DATA:"HYDRATE_LICENSE_DATA",LICENSE_FETCH_ERROR:"LICENSE_FETCH_ERROR"},D={success:!1,license:"invalid",license_limit:1,site_count:0,expires:"",activations_left:0,price_id:0,error:void 0,error_message:void 0},m={key:"",status:D},O={license:m},L=(e="")=>(e&&(e=`/${e}`),`content-control/v2/license${e}`),{ACTIVATE_LICENSE:H,CONNECT_SITE:U,DEACTIVATE_LICENSE:w,UPDATE_LICENSE_KEY:b,REMOVE_LICENSE:P,CHECK_LICENSE_STATUS:G,HYDRATE_LICENSE_DATA:k,CHANGE_ACTION_STATUS:K}=N,x=(e,t,n)=>(n&&console.log(e,n),{type:K,actionName:e,status:t,message:n});function*V(e){const t="activateLicense";try{yield x(t,v.Resolving);const n=yield p(L("activate"),{method:"POST",body:{licenseKey:e}});if(n){const{status:e,connectInfo:r}=n;return yield x(t,v.Success),void 0!==r?{type:U,licenseStatus:e,connectInfo:r}:{type:H,licenseStatus:e}}return x(t,v.Error,(0,R.__)("An error occurred, license were not saved.","content-control"))}catch(e){return x(t,v.Error,A(e))}}function*Y(){const e="deactivateLicense";try{yield x(e,v.Resolving);const t=yield p(L("deactivate"),{method:"POST"});return t?(yield x(e,v.Success),{type:w,licenseStatus:t.status}):x(e,v.Error,(0,R.__)("An error occurred, license were not saved.","content-control"))}catch(t){return x(e,v.Error,A(t))}}function*F(){const e="checkLicenseStatus";try{yield x(e,v.Resolving);const t=yield p(L("status"),{method:"POST"});return t?(yield x(e,v.Success),{type:G,licenseStatus:t.status}):x(e,v.Error,(0,R.__)("An error occurred, license were not saved.","content-control"))}catch(t){return x(e,v.Error,A(t))}}function*B(e){const t="updateLicenseKey";if((yield(0,h.resolveSelect)(I,"getLicenseKey"))===e)return x(t,v.Error,(0,R.__)("The license key is the same as the current one.","content-control"));try{yield x(t,v.Resolving);const n=yield p(L(),{method:"POST",body:{licenseKey:e}});return n?(yield x(t,v.Success),{type:b,licenseKey:e,licenseStatus:n.status}):x(t,v.Error,(0,R.__)("An error occurred, license were not saved.","content-control"))}catch(e){return x(t,v.Error,A(e))}}function*M(){const e="removeLicense";try{return yield x(e,v.Resolving),(yield p(L(),{method:"DELETE"}))?(yield x(e,v.Success),{type:P}):x(e,v.Error,(0,R.__)("An error occurred, license were not saved.","content-control"))}catch(t){return x(e,v.Error,A(t))}}const j=e=>({type:k,license:e}),{ACTIVATE_LICENSE:Q,CONNECT_SITE:$,DEACTIVATE_LICENSE:q,REMOVE_LICENSE:W,UPDATE_LICENSE_KEY:J,CHECK_LICENSE_STATUS:X,HYDRATE_LICENSE_DATA:z,CHANGE_ACTION_STATUS:Z,LICENSE_FETCH_ERROR:ee}=N;const{LICENSE_FETCH_ERROR:te}=N;function*ne(){try{const e=yield p(L(),{method:"GET"});return e?j(e):{type:te,message:(0,R.__)("An error occurred, license data was not loaded.","content-control")}}catch(e){return{type:te,message:A(e)}}}function*re(){const{key:e}=yield(0,C.select)(I,"getLicenseData");return e}function*se(){const{status:e}=yield(0,C.select)(I,"getLicenseData");return e}const ie=e=>e.license,ce=e=>{const{key:t}=ie(e);return t},oe=e=>{const{status:t}=ie(e);return{...D,...t}},ae=e=>e.connectInfo,ue=(e,t)=>e?.dispatchStatus?.[t]?.status,de=(e,t)=>{if(!Array.isArray(t))return ue(e,t)===v.Resolving;let n=!1;for(let r=0;t.length>r;r++)if(n=ue(e,t[r])===v.Resolving,n)return!0;return n},le=(e,t)=>{const n=ue(e,t);return!!(n&&[v.Success,v.Error].indexOf(n)>=0)},Ee=(e,t)=>e?.dispatchStatus?.[t]?.error,Se=(0,h.createReduxStore)(I,{initialState:O,selectors:s,actions:n,reducer:(e,{type:t,license:n,licenseKey:r,licenseStatus:s,connectInfo:i,actionName:c,status:o,message:a})=>{switch(t){case Q:case q:case X:return{...e,license:{...e.license,status:s}};case $:return{...e,license:{...e.license,status:s},connectInfo:i};case J:return{...e,license:{...e.license,key:r,status:s}};case W:return{...e,license:{key:"",status:{}}};case z:return{...e,license:n};case ee:return{...e,error:a};case Z:return{...e,dispatchStatus:{...e.dispatchStatus,[c]:{...e?.dispatchStatus?.[c],status:o,error:a}}};default:return e}},resolvers:r,controls:{...C.controls,...y}});var _e=window.wp.hooks;const ge="content-control/settings",pe={UPDATE:"UPDATE",STAGE_CHANGES:"STAGE_CHANGES",SAVE_CHANGES:"SAVE_CHANGES",HYDRATE:"HYDRATE",CHANGE_ACTION_STATUS:"CHANGE_ACTION_STATUS",SETTINGS_FETCH_ERROR:"SETTINGS_FETCH_ERROR",HYDRATE_BLOCK_TYPES:"HYDRATE_BLOCK_TYPES",BLOCK_TYPES_FETCH_ERROR:"BLOCK_TYPES_FETCH_ERROR"},Te=(0,_e.applyFilters)("contentControl.defaultSettings",{defaultDenialMessage:"",excludeAdmins:!0,excludedBlocks:[],permissions:{view_block_controls:"edit_posts",edit_block_controls:"edit_posts",edit_restrictions:"manage_options",manage_settings:"manage_options"},mediaQueries:{mobile:{override:!1,breakpoint:640},tablet:{override:!1,breakpoint:920},desktop:{override:!1,breakpoint:1440}}}),ye={settings:Te,unsavedChanges:{}},fe=()=>"content-control/v2/settings",{UPDATE:Ae,SAVE_CHANGES:he,STAGE_CHANGES:Ce,HYDRATE:Re,CHANGE_ACTION_STATUS:ve,HYDRATE_BLOCK_TYPES:Ie}=pe,Ne=(e,t,n)=>(n&&console.log(e,n),{type:ve,actionName:e,status:t,message:n});function*De(e){const t="updateSettings";try{yield Ne(t,v.Resolving);const n=yield(0,C.select)(ge,"getSettings"),r=yield p(fe(),{method:"PUT",body:{...n,...e}});return r?(yield Ne(t,v.Success),{type:Ae,settings:r}):Ne(t,v.Error,(0,R.__)("An error occurred, settings were not saved.","content-control"))}catch(e){return Ne(t,v.Error,A(e))}}function*me(){const e="saveSettings";try{yield Ne(e,v.Resolving);const t=yield(0,C.select)(ge,"getSettings"),n=yield(0,C.select)(ge,"getUnsavedChanges"),r=yield p(fe(),{method:"PUT",body:{...t,...n}});return r?(yield Ne(e,v.Success),{type:he,settings:r}):Ne(e,v.Error,(0,R.__)("An error occurred, settings were not saved.","content-control"))}catch(t){return Ne(e,v.Error,A(t))}}const Oe=e=>({type:Ce,settings:e}),Le=e=>({type:Re,settings:e}),He=e=>({type:Ie,blockTypes:e}),{UPDATE:Ue,STAGE_CHANGES:we,SAVE_CHANGES:be,HYDRATE:Pe,HYDRATE_BLOCK_TYPES:Ge,CHANGE_ACTION_STATUS:ke,SETTINGS_FETCH_ERROR:Ke,BLOCK_TYPES_FETCH_ERROR:xe}=pe;const{SETTINGS_FETCH_ERROR:Ve,BLOCK_TYPES_FETCH_ERROR:Ye}=pe;function*Fe(){try{const e=yield p(fe(),{method:"GET"});return e?Le(e):{type:Ve,message:(0,R.__)("An error occurred, settings were not loaded.","content-control")}}catch(e){return{type:Ve,message:A(e)}}}function*Be(){try{const e=yield p(`${S}/blockTypes`,{method:"GET"});return e?He(e):{type:Ye,message:(0,R.__)("An error occurred, block types were not loaded.","content-control")}}catch(e){return{type:Ye,message:A(e)}}}const Me=e=>e.settings,je=e=>e.knownBlockTypes,Qe=(e,t,n)=>{var r;return null!==(r=Me(e)[t])&&void 0!==r?r:n},$e=e=>{var t;return null!==(t=e?.unsavedChanges)&&void 0!==t?t:{}},qe=e=>{var t;return Object.keys(null!==(t=e?.unsavedChanges)&&void 0!==t?t:{}).length>0},We=e=>Qe(e,"excludedBlocks",Te.excludedBlocks),Je=(e,t)=>{const n=Qe(e,"permissions",Te.permissions)[t];return"string"==typeof n?n:"manage_options"},Xe=(e,t)=>e?.dispatchStatus?.[t]?.status,ze=(e,t)=>{if(!Array.isArray(t))return Xe(e,t)===v.Resolving;let n=!1;for(let r=0;t.length>r;r++)if(n=Xe(e,t[r])===v.Resolving,n)return!0;return n},Ze=(e,t)=>{const n=Xe(e,t);return!!(n&&[v.Success,v.Error].indexOf(n)>=0)},et=(e,t)=>e?.dispatchStatus?.[t]?.error,tt=(0,h.createReduxStore)(ge,{initialState:ye,selectors:o,actions:i,reducer:(e,{type:t,settings:n,actionName:r,status:s,message:i,blockTypes:c})=>{var o;switch(t){case Pe:return{...e,settings:n};case Ge:return{...e,knownBlockTypes:c};case xe:case Ke:return{...e,error:i};case we:return{...e,unsavedChanges:{...null!==(o=e.unsavedChanges)&&void 0!==o?o:{},...n}};case be:return{...e,settings:{...e.settings,...n},unsavedChanges:{}};case Ue:return{...e,settings:{...e.settings,...n}};case ke:return{...e,dispatchStatus:{...e.dispatchStatus,[r]:{...e?.dispatchStatus?.[r],status:s,error:i}}};default:return e}},resolvers:c,controls:{...C.controls,...y}}),nt=(e=void 0)=>{const t="content-control/v2/restrictions";return e?`${t}/${e}`:t},rt=({title:e,excerpt:t,...n})=>({...n,title:"string"==typeof e?e:e.raw,description:"string"==typeof t?t:t.raw}),st=({description:e,...t})=>({...t,excerpt:e}),it=e=>!!e&&(e.title.length?!(!e.settings?.conditions?.items?.length&&"publish"===e.status)||{message:(0,R.__)("Please provide at least one condition for this restriction before enabling it.","content-control"),tabName:"content"}:{message:(0,R.__)("Please provide a name for this restriction.","content-control"),tabName:"general",field:"title"}),ct="content-control/restrictions",ot={CREATE:"CREATE",UPDATE:"UPDATE",DELETE:"DELETE",HYDRATE:"HYDRATE",ADD_NOTICE:"ADD_NOTICE",CLEAR_NOTICE:"CLEAR_NOTICE",CLEAR_NOTICES:"CLEAR_NOTICES",EDITOR_CHANGE_ID:"EDITOR_CHANGE_ID",EDITOR_CLEAR_DATA:"EDITOR_CLEAR_DATA",EDITOR_UPDATE_VALUES:"EDITOR_UPDATE_VALUES",CHANGE_ACTION_STATUS:"CHANGE_ACTION_STATUS",RESTRICTIONS_FETCH_ERROR:"RESTRICTIONS_FETCH_ERROR"},at={restrictions:[],editor:{},notices:[]},ut={id:0,title:"",description:"",status:"draft",priority:0,settings:{userStatus:"logged_in",roleMatch:"any",userRoles:[],protectionMethod:"redirect",redirectType:"login",redirectUrl:"",replacementType:"message",replacementPage:void 0,archiveHandling:"filter_post_content",archiveReplacementPage:void 0,archiveRedirectType:"login",archiveRedirectUrl:"",additionalQueryHandling:"filter_post_content",showExcerpts:!1,overrideMessage:!1,customMessage:"",conditions:{logicalOperator:"or",items:[]}}},{CREATE:dt,DELETE:lt,UPDATE:Et,HYDRATE:St,ADD_NOTICE:_t,CLEAR_NOTICE:gt,CLEAR_NOTICES:pt,CHANGE_ACTION_STATUS:Tt,EDITOR_CHANGE_ID:yt,EDITOR_CLEAR_DATA:ft,EDITOR_UPDATE_VALUES:At}=ot,ht=(e,t,n)=>(n&&console.log(e,n),{type:Tt,actionName:e,status:t,message:n}),Ct=e=>({type:_t,notice:e}),Rt=e=>({type:gt,noticeId:e}),vt=()=>({type:pt});function*It(e){try{if(void 0===e)return{type:yt,editorId:void 0,editorValues:void 0};const t=yield(0,C.select)(ct,"getRestrictionDefaults");let n="new"===e?t:void 0;return"number"==typeof e&&e>0&&(n=yield(0,C.select)(ct,"getRestriction",e)),{type:yt,editorId:e,editorValues:n}}catch(e){return console.log(e),ht("changeEditorId",v.Error,A(e))}}const Nt=e=>({type:At,editorValues:e}),Dt=()=>({type:ft});function*mt(e){const t="createRestriction";try{yield ht(t,v.Resolving);const{id:n,...r}=e,s=it(e);if(!0!==s)return yield ht(t,v.Error,s||(0,R.__)("An error occurred, restriction was not saved.")),Ct({id:"restriction-error",type:"error",message:"object"==typeof s?s.message:"",closeDelay:5e3});const i=yield p(nt(),{method:"POST",body:st(r)});if(i){yield ht(t,v.Success);const n=yield(0,C.select)(ct,"getEditorId"),r={type:dt,restriction:rt(i)};return"new"===n?(yield r,void(yield It(i.id))):(yield Ct({id:"restriction-saved",type:"success",message:(0,R.sprintf)(
// translators: %s: restriction title.
(0,R.__)('Restriction "%s" saved successfully.',"content-control"),e?.title),closeDelay:5e3}),r)}return ht(t,v.Error,(0,R.__)("An error occurred, restriction was not saved.","content-control"))}catch(e){return ht(t,v.Error,A(e))}}function*Ot(e){const t="updateRestriction";try{yield ht(t,v.Resolving);const n=it(e);if(!0!==n)return yield ht(t,v.Error,n||(0,R.__)("An error occurred, restriction was not saved.")),Ct({id:"restriction-error",type:"error",message:"object"==typeof n?n.message:"",closeDelay:5e3});const r=yield(0,C.select)(ct,"getRestriction",e.id),s=yield p(nt(r.id),{method:"POST",body:st(e)});return s?(yield ht(t,v.Success),yield Ct({id:"restriction-saved",type:"success",message:(0,R.sprintf)(
// translators: %s: restriction title.
(0,R.__)('Restriction "%s" saved successfully.',"content-control"),e?.title),closeDelay:5e3}),{type:Et,restriction:rt(s)}):ht(t,v.Error,(0,R.__)("An error occurred, restriction was not saved.","content-control"))}catch(e){return ht(t,v.Error,A(e))}}function*Lt(e,t=!1){const n="deleteRestriction";try{yield ht(n,v.Resolving);const r=yield(0,C.select)(ct,"getRestriction",e),s=t?"?force=true":"",i=nt(r.id)+s;return(yield p(i,{method:"DELETE"}))?(yield ht(n,v.Success),t?{type:lt,restrictionId:e}:{type:Et,restriction:{...r,status:"trash"}}):ht(n,v.Error,(0,R.__)("An error occurred, restriction was not deleted.","content-control"))}catch(e){return ht(n,v.Error,A(e))}}const Ht=e=>({type:St,restrictions:e}),{CREATE:Ut,DELETE:wt,UPDATE:bt,HYDRATE:Pt,ADD_NOTICE:Gt,CLEAR_NOTICE:kt,CLEAR_NOTICES:Kt,CHANGE_ACTION_STATUS:xt,EDITOR_CHANGE_ID:Vt,EDITOR_CLEAR_DATA:Yt,EDITOR_UPDATE_VALUES:Ft,RESTRICTIONS_FETCH_ERROR:Bt}=ot;const{UPDATE:Mt,RESTRICTIONS_FETCH_ERROR:jt}=ot;function*Qt(){try{const e=yield p(f(nt(),{status:["any","trash","auto-draft"],per_page:100,context:"edit"}));if(e){const t=e.map(rt);return Ht(t)}return{type:jt,message:(0,R.__)("An error occurred, restrictions were not loaded.","content-control")}}catch(e){return{type:jt,message:A(e)}}}function*$t(e){try{const t=yield p(f(nt(e),{context:"edit"}));return t?{type:Mt,restriction:rt(t)}:{type:jt,message:(0,R.sprintf)(/* translators: 1: restriction id */
(0,R.__)("An error occurred, restriction %d were not loaded.","content-control"),e)}}catch(e){return{type:jt,message:A(e)}}}const qt=e=>e.notices||[],Wt=e=>e.restrictions||[],Jt=(e,t)=>Wt(e).find((e=>e.id===t)),Xt=e=>{const t=e?.editor?.id;return"string"==typeof t&&"new"===t||"number"==typeof t&&t>0},zt=e=>e?.editor?.id,Zt=e=>e?.editor?.values,en=e=>{const t=Wt(e);return 0===t.length?0:t.reduce(((e,t)=>t.priority>e?t.priority:e),0)+1},tn=e=>{const t=en(e);return{...ut,priority:t}},nn=(e,t)=>e?.dispatchStatus?.[t]?.status,rn=(e,t)=>{if(!Array.isArray(t))return nn(e,t)===v.Resolving;let n=!1;for(let r=0;t.length>r;r++)if(n=nn(e,t[r])===v.Resolving,n)return!0;return n},sn=(e,t)=>{const n=nn(e,t);return!!(n&&[v.Success,v.Error].indexOf(n)>=0)},cn=(e,t)=>e?.dispatchStatus?.[t]?.error,on=(0,h.createReduxStore)(ct,{initialState:at,selectors:d,actions:a,reducer:(e=at,{restrictions:t,restriction:n,restrictionId:r,type:s,editorId:i,editorValues:c,actionName:o,status:a,message:u,notice:d,noticeId:l})=>{switch(s){case Ut:return{...e,restrictions:[...e.restrictions,n]};case bt:return{...e,restrictions:e.restrictions.filter((e=>e.id!==n.id)).concat([n])};case wt:return{...e,restrictions:e.restrictions.filter((e=>e.id!==r))};case Pt:return{...e,restrictions:t};case Gt:return{...e,notices:[...e.notices.filter((({id:e})=>e!==d.id)),d]};case kt:return{...e,notices:e.notices.filter((({id:e})=>e!==l))};case Kt:return{...e,notices:[]};case Bt:return{...e,error:u};case Vt:return{...e,editor:{...e.editor,id:i,values:c}};case Ft:return{...e,editor:{...e.editor,values:{...e.editor?.values,...c}}};case Yt:return{...e,editor:{}};case xt:return{...e,dispatchStatus:{...e.dispatchStatus,[o]:{...e?.dispatchStatus?.[o],status:a,error:u}}};default:return e}},resolvers:u,controls:{...C.controls,...y}}),an="content-control/url-search",un={SEARCH_REQUEST:"SEARCH_REQUEST",SEARCH_SUCCESS:"SEARCH_SUCCESS",SEARCH_ERROR:"SEARCH_ERROR",UPDATE_SUGGESTIONS:"UPDATE_SUGGESTIONS",CHANGE_ACTION_STATUS:"CHANGE_ACTION_STATUS"},dn={currentQuery:"",searchResults:[],queries:{}};var ln=window.wp.apiFetch,En=e.n(ln);const Sn=(e={search:""})=>f("wp/v2/search",e),gn=(e,t={})=>({type:"FETCH_LINK_SUGGESTIONS",search:e,searchOptions:t});var pn={async FETCH_LINK_SUGGESTIONS({search:e,searchOptions:t={},settings:n={disablePostFormats:!1}}){const{isInitialSuggestions:r=!1,type:s,subtype:i,page:c,perPage:o=(r?3:20)}=t,{disablePostFormats:a=!1}=n,u=[],d=e=>!s||s===e||Array.isArray(s)&&s.indexOf(e)>=0;return d("post")&&u.push(En()({path:Sn({search:e,page:c,per_page:o,type:"post",subtype:i}),cache:"no-cache"}).then((e=>e.map((e=>({...e,meta:{kind:"post-type",subtype:i}}))))).catch((()=>[]))),d("term")&&u.push(En()({path:Sn({search:e,page:c,per_page:o,type:"term",subtype:i}),cache:"no-cache"}).then((e=>e.map((e=>({...e,meta:{kind:"taxonomy",subtype:i}}))))).catch((()=>[]))),!a&&d("post-format")&&u.push(En()({path:Sn({search:e,page:c,per_page:o,type:"post-format",subtype:i}),cache:"no-cache"}).then((e=>e.map((e=>({...e,meta:{kind:"taxonomy",subtype:i}}))))).catch((()=>[]))),d("attachment")&&u.push(En()({path:Sn({search:e,page:c,per_page:o}),cache:"no-cache"}).then((e=>e.map((e=>({...e,meta:{kind:"media"}}))))).catch((()=>[]))),Promise.all(u).then((e=>e.reduce(((e,t)=>e.concat(t)),[]).filter((e=>!!e.id)).slice(0,o).map((e=>{const t="attachment"===e.type;return{id:e.id,url:t?e.source_url:e.url,title:t?e.title.rendered:e.title||(0,R.__)("(no title)"),type:e?.subtype||e.type,kind:e?.meta?.kind}}))))}};const{SEARCH_REQUEST:Tn,SEARCH_SUCCESS:yn,SEARCH_ERROR:fn,CHANGE_ACTION_STATUS:An}=un;function*hn(e,t){const n="updateSuggestions";try{yield In(n,v.Resolving),yield Cn(e);const r=yield gn(e,t);if(r)return yield In(n,v.Success),Rn(e,r);const s=(0,R.__)("No results returned","content-control");return yield In(n,v.Error,s),vn(e,s)}catch(t){const r=A(t);return yield In(n,v.Error,r),vn(e,r)}}function Cn(e){return{type:Tn,queryText:e}}function Rn(e,t){return{type:yn,queryText:e,results:t}}function vn(e,t){return{type:fn,queryText:e,error:t}}const In=(e,t,n)=>(n&&console.log(e,n),{type:An,actionName:e,status:t,message:n}),{SEARCH_ERROR:Nn,SEARCH_REQUEST:Dn,SEARCH_SUCCESS:mn,CHANGE_ACTION_STATUS:On}=un;const Ln=e=>e.searchResults||[],Hn=(e,t)=>e?.dispatchStatus?.[t]?.status,Un=(e,t)=>{if(!Array.isArray(t))return Hn(e,t)===v.Resolving;let n=!1;for(let r=0;t.length>r;r++)if(n=Hn(e,t[r])===v.Resolving,n)return!0;return n},wn=(e,t)=>{const n=Hn(e,t);return!!(n&&[v.Success,v.Error].indexOf(n)>=0)},bn=(e,t)=>e?.dispatchStatus?.[t]?.error,Pn=(0,h.createReduxStore)(an,{initialState:dn,selectors:E,actions:l,reducer:(e=dn,{type:t,queryText:n,results:r,error:s,actionName:i,status:c,message:o})=>{var a;switch(t){case Dn:return{...e,currentQuery:n};case mn:return e.currentQuery===n?{searchResults:r}:e;case Nn:return e.currentQuery===n?{...e,error:s}:e;case On:return{...e,dispatchStatus:{...e.dispatchStatus,[i]:{...null!==(a=e?.dispatchStatus?.[i])&&void 0!==a?a:{},status:c,error:o}}};default:return e}},controls:{...C.controls,...y,...pn}});var Gn=window.wp.element,kn=()=>{var e,t,n,r;const{connectInfo:s,licenseKey:i,licenseStatus:c,isSaving:o}=(0,h.useSelect)((e=>{const t=e(Se);return{connectInfo:t.getConnectInfo(),licenseKey:t.getLicenseKey(),licenseStatus:t.getLicenseStatus(),isSaving:t.isDispatching("activateLicense")||t.isDispatching("deactivateLicense")||t.isDispatching("checkLicenseStatus")||t.isDispatching("updateLicenseKey")||t.isDispatching("removeLicense")}}),[]),{activateLicense:a,deactivateLicense:u,checkLicenseStatus:d,updateLicenseKey:l,removeLicense:E}=(0,h.useDispatch)(Se),S="valid"===c?.license,_=["deactivated","site_inactive","inactive"].includes(null!==(e=c?.license)&&void 0!==e?e:""),g=["invalid","failed"].includes(c?.license),p=g&&["","missing"].includes(null!==(t=c?.error)&&void 0!==t?t:""),T="expired"===c?.license||["invalid","failed"].includes(null!==(n=c?.license)&&void 0!==n?n:"")&&"expired"===c?.error,y="disabled"===c?.license||g&&"disabled"===c?.error,f="no_activations_left"===c?.error,A=!!c?.error,C=g&&A&&!["missing","expired","disabled"].includes(null!==(r=c?.error)&&void 0!==r?r:""),R=(0,Gn.useMemo)((()=>S||_||T||y||f),[S,_,T,y,f]);return{connectInfo:s,licenseKey:i,licenseStatus:c,activateLicense:a,deactivateLicense:u,checkLicenseStatus:d,updateLicenseKey:l,removeLicense:E,getLicenseStatusName:(0,Gn.useMemo)((()=>S?"active":T?"expired":p?"missing":_?"deactivated":y?"disabled":C?"error":"unknown"),[S,T,p,_,y,C]),isSaving:o,isLicenseKeyValid:R,isLicenseActive:S,isLicenseDeactivated:_,isLicenseMissing:p,isLicenseExpired:T,isLicenseInvalid:g,isLicenseDisabled:y,isLicenseOverQuota:f,isGeneralError:C,hasError:A}};const Kn=e=>{const t=e(tt);return{unsavedChanges:t.getUnsavedChanges(),hasUnsavedChanges:t.hasUnsavedChanges(),currentSettings:t.getSettings(),isSaving:t.isDispatching("updateSettings")||t.isDispatching("saveSettings")}};var xn=()=>{const{currentSettings:e,unsavedChanges:t,hasUnsavedChanges:n,isSaving:r}=(0,h.useSelect)(Kn,[]),{updateSettings:s,saveSettings:i,stageUnsavedChanges:c}=(0,h.useDispatch)(tt),o=(0,Gn.useMemo)((()=>({...e,...t})),[e,t]);return{currentSettings:e,settings:o,getSetting:(e,t)=>{var n;return null!==(n=o[e])&&void 0!==n?n:t},updateSettings:s,saveSettings:i,isSaving:r,hasUnsavedChanges:n,stageUnsavedChanges:c,unsavedChanges:t}};(window.contentControl=window.contentControl||{}).coreData=t}();