!function(){var e={184:function(e,t){var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var l=r.apply(null,n);l&&e.push(l)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)o.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};!function(){"use strict";n.r(o),n.d(o,{init:function(){return un}});var e,t,r=window.React;function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}(t=e||(e={})).Pop="POP",t.Push="PUSH",t.Replace="REPLACE";const l="popstate";function c(e,t){if(!1===e||null==e)throw new Error(t)}function s(e,t){return{usr:e.state,key:e.key,idx:t}}function i(e,t,n,o){return void 0===n&&(n=null),a({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?d(t):t,{state:n,key:t&&t.key||o||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(t+="#"===o.charAt(0)?o:"#"+o),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}var m;function p(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const g=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",h=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const _=["post","put","patch","delete"],v=(new Set(_),["get",..._]);new Set(v),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,Symbol("deferred");const f="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},{useState:E,useEffect:b,useLayoutEffect:w,useDebugValue:y}=r;function C(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!f(n,e)}catch(e){return!0}}"undefined"==typeof window||void 0===window.document||window.document.createElement;"useSyncExternalStore"in r&&r.useSyncExternalStore;const S=r.createContext(null),k=r.createContext(null),x=r.createContext(null),N=r.createContext({outlet:null,matches:[]});function R(){return null!=r.useContext(x)}function P(){return R()||c(!1),r.useContext(x).location}function T(){R()||c(!1);let{basename:e,navigator:t}=r.useContext(k),{matches:n}=r.useContext(N),{pathname:o}=P(),l=JSON.stringify(function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(n).map((e=>e.pathnameBase))),s=r.useRef(!1);r.useEffect((()=>{s.current=!0}));let i=r.useCallback((function(n,r){if(void 0===r&&(r={}),!s.current)return;if("number"==typeof n)return void t.go(n);let i=function(e,t,n,o){let r;void 0===o&&(o=!1),"string"==typeof e?r=d(e):(r=a({},e),c(!r.pathname||!r.pathname.includes("?"),p("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),p("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),p("#","search","hash",r)));let l,s=""===e||""===r.pathname,i=s?"/":r.pathname;if(o||null==i)l=n;else{let e=t.length-1;if(i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}l=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:o="",hash:r=""}="string"==typeof e?d(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:g(o),hash:h(r)}}(r,l),m=i&&"/"!==i&&i.endsWith("/"),_=(s||"."===i)&&n.endsWith("/");return u.pathname.endsWith("/")||!m&&!_||(u.pathname+="/"),u}(n,JSON.parse(l),o,"path"===r.relative);"/"!==e&&(i.pathname="/"===i.pathname?e:[e,i.pathname].join("/").replace(/\/\/+/g,"/")),(r.replace?t.replace:t.push)(i,r.state,r)}),[e,t,l,o]);return i}var L,M,B,D,O;function A(t){let{basename:n="/",children:o=null,location:a,navigationType:l=e.Pop,navigator:s,static:i=!1}=t;R()&&c(!1);let u=n.replace(/^\/*/,"/"),m=r.useMemo((()=>({basename:u,navigator:s,static:i})),[u,s,i]);"string"==typeof a&&(a=d(a));let{pathname:p="/",search:g="",hash:h="",state:_=null,key:v="default"}=a,f=r.useMemo((()=>{let e=function(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&"/"!==o?null:e.slice(n)||"/"}(p,u);return null==e?null:{location:{pathname:e,search:g,hash:h,state:_,key:v},navigationType:l}}),[u,p,g,h,_,v,l]);return null==f?null:r.createElement(k.Provider,{value:m},r.createElement(x.Provider,{children:o,value:f}))}function U(t){let{basename:n,children:o,window:d}=t,m=r.useRef();null==m.current&&(m.current=function(t){return void 0===t&&(t={}),function(t,n,o,r){void 0===r&&(r={});let{window:d=document.defaultView,v5Compat:m=!1}=r,p=d.history,g=e.Pop,h=null,_=v();function v(){return(p.state||{idx:null}).idx}function f(){g=e.Pop;let t=v(),n=null==t?null:t-_;_=t,h&&h({action:g,location:b.location,delta:n})}function E(e){let t="null"!==d.location.origin?d.location.origin:d.location.href,n="string"==typeof e?e:u(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==_&&(_=0,p.replaceState(a({},p.state,{idx:_}),""));let b={get action(){return g},get location(){return t(d,p)},listen(e){if(h)throw new Error("A history only accepts one active listener");return d.addEventListener(l,f),h=e,()=>{d.removeEventListener(l,f),h=null}},createHref(e){return n(d,e)},createURL:E,encodeLocation(e){let t=E(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){g=e.Push;let r=i(b.location,t,n);o&&o(r,t),_=v()+1;let a=s(r,_),l=b.createHref(r);try{p.pushState(a,"",l)}catch(e){d.location.assign(l)}m&&h&&h({action:g,location:b.location,delta:1})},replace:function(t,n){g=e.Replace;let r=i(b.location,t,n);o&&o(r,t),_=v();let a=s(r,_),l=b.createHref(r);p.replaceState(a,"",l),m&&h&&h({action:g,location:b.location,delta:0})},go(e){return p.go(e)}};return b}((function(e,t){let{pathname:n,search:o,hash:r}=e.location;return i("",{pathname:n,search:o,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:u(t)}),null,t)}({window:d,v5Compat:!0}));let p=m.current,[g,h]=r.useState({action:p.action,location:p.location});return r.useLayoutEffect((()=>p.listen(h)),[p]),r.createElement(A,{basename:n,children:o,location:g.location,navigationType:g.action,navigator:p})}function F(e,t,n=!0){return{...e,default:t,decode:(...o)=>{const r=e.decode(...o);return void 0===r||n&&null===r?t:r}}}function V(e,t){if(null==e)return e;if(0===e.length&&(!t||t&&""!==e))return null;const n=e instanceof Array?e[0]:e;return null==n||t||""!==n?n:null}r.Component,function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(L||(L={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(M||(M={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(B||(B={})),new Promise((()=>{})),r.Component,"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"}(D||(D={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(O||(O={}));const j={encode:function(e){return null==e?e:String(e)},decode:function(e){const t=V(e,!0);return null==t?t:String(t)}},z={encode:function(e){return null==e?e:String(e)},decode:function(e){const t=V(e);return null==t?t:""===t?null:+t}},I={encode:function(e){return null==e?e:e?"1":"0"},decode:function(e){const t=V(e);return null==t?t:"1"===t||"0"!==t&&null}};'{}[],":'.split("").map((e=>[e,encodeURIComponent(e)]));const H=new class{constructor(){this.paramsMap=new Map,this.registeredParams=new Map}set(e,t,n,o){this.paramsMap.set(e,{stringified:t,decoded:n,decode:o})}has(e,t,n){if(!this.paramsMap.has(e))return!1;const o=this.paramsMap.get(e);return!!o&&o.stringified===t&&(null==n||o.decode===n)}get(e){var t;if(this.paramsMap.has(e))return null==(t=this.paramsMap.get(e))?void 0:t.decoded}registerParams(e){for(const t of e){const e=this.registeredParams.get(t)||0;this.registeredParams.set(t,e+1)}}unregisterParams(e){for(const t of e){const e=(this.registeredParams.get(t)||0)-1;e<=0?(this.registeredParams.delete(t),this.paramsMap.has(t)&&this.paramsMap.delete(t)):this.registeredParams.set(t,e)}}clear(){this.paramsMap.clear(),this.registeredParams.clear()}};function $(e,t,n,o){var r;if(!n||!t.length)return e;let a={...e},l=!1;for(const e of t)Object.prototype.hasOwnProperty.call(a,e)||(a[e]=null!=(r=n[e])?r:o,l=!0);return l?a:e}const G=Object.prototype.hasOwnProperty;function W(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Q(e,t,n){var o,r;if(W(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(let l=0;l<a.length;l++){const c=null!=(r=null==(o=null==n?void 0:n[a[l]])?void 0:o.equals)?r:W;if(!G.call(t,a[l])||!c(e[a[l]],t[a[l]]))return!1}return!0}function q(e,t,n){const o={},r=Object.keys(t);for(const a of r){const r=t[a],l=e[a];let c;if(n.has(a,l,r.decode))c=n.get(a);else{if(c=r.decode(l),r.equals&&n.has(a,l)){const e=n.get(a);r.equals(c,e)&&(c=e)}void 0!==c&&n.set(a,l,c,r.decode)}void 0===c&&void 0!==r.default&&(c=r.default),o[a]=c}return o}function Y(){let e;return function(t,n,o){const r=q(t,n,o);return null!=e&&Q(e,r)?e:(e=r,r)}}let K,J,Z,X={};const ee=(e,t,n)=>{if(K===t&&Z===e&&J===n)return X;K=t,Z=e;const o=e(null!=t?t:"");J=n;const r=function(e){if(e)return Object.fromEntries(e.split("\n").map((e=>e.split("\0"))))}(n);for(let[e,t]of Object.entries(o)){(null==r?void 0:r[e])&&(delete o[e],e=r[e],o[e]=t);const n=X[e];Q(t,n)&&(o[e]=n)}return X=o,o};function te(e,t){null==t&&(t={});const n={...e,...t};return t.params&&e.params&&(n.params={...e.params,...t.params}),n}const ne={adapter:{},options:{searchStringToObject:function(e){const t=new URLSearchParams(e),n={};for(let[e,o]of t)Object.prototype.hasOwnProperty.call(n,e)?Array.isArray(n[e])?n[e].push(o):n[e]=[n[e],o]:n[e]=o;return n},objectToSearchString:function(e){const t=new URLSearchParams,n=Object.entries(e);for(const[e,o]of n)if(null!=o)if(Array.isArray(o))for(const n of o)t.append(e,null!=n?n:"");else t.append(e,o);return t.toString()},updateType:"pushIn",includeKnownParams:void 0,includeAllParams:!1,removeDefaultsFromUrl:!1,enableBatching:!1,skipUpdateWhenNoChange:!0}},oe=r.createContext(ne);function re({children:e,adapter:t,options:n}){const{adapter:o,options:a}=r.useContext(oe),l=r.useMemo((()=>({adapter:null!=t?t:o,options:te(a,n)})),[t,n,o,a]);return r.createElement(oe.Provider,{value:l},e)}function ae({children:e,adapter:t,options:n}){const o=t;return o?r.createElement(o,null,(t=>r.createElement(re,{adapter:t,options:n},e))):r.createElement(re,{options:n},e)}function le({changes:e,updateType:t,currentSearchString:n,paramConfigMap:o,options:r}){const{searchStringToObject:a,objectToSearchString:l}=r;let c;null==t&&(t=r.updateType);const s=ee(a,n),i=$(o,Object.keys(e),r.params);let u,d;return u="function"==typeof e?e(q(s,i,H)):e,c=function(e,t){const n={},o=Object.keys(t);for(const r of o){const o=t[r];e[r]?n[r]=e[r].encode(t[r]):n[r]=null==o?o:String(o)}return n}(i,u),r.removeDefaultsFromUrl&&function(e,t){var n;for(const o in e)void 0!==(null==(n=t[o])?void 0:n.default)&&void 0!==e[o]&&t[o].encode(t[o].default)===e[o]&&(e[o]=void 0)}(c,i),c=function(e,t){var n;let o={};for(const r in e)null!=(null==(n=t[r])?void 0:n.urlName)?o[t[r].urlName]=e[r]:o[r]=e[r];return o}(c,i),d=l("push"===t||"replace"===t?c:{...s,...c}),(null==d?void 0:d.length)&&"?"!==d[0]&&(d=`?${d}`),null!=d?d:""}const ce=e=>e(),se=e=>setTimeout((()=>e()),0),ie=[];function ue(e,t){const{adapter:n,options:o}=function(){const e=r.useContext(oe);if(void 0===e||e===ne)throw new Error("useQueryParams must be used within a QueryParamProvider");return e}(),[a]=(0,r.useState)(Y),{paramConfigMap:l,options:c}=function(e,t){let n,o;return void 0===e?(n={},o=t):Array.isArray(e)?(n=Object.fromEntries(e.map((e=>[e,"inherit"]))),o=t):(n=e,o=t),{paramConfigMap:n,options:o}}(e,t),s=(0,r.useMemo)((()=>te(o,c)),[o,c]);let i=function(e,t){var n,o,r;const a={};let l=!1;const c=Object.keys(e);let s=c;if(t.includeKnownParams||!1!==t.includeKnownParams&&0===c.length){const e=Object.keys(null!=(n=t.params)?n:{});s.push(...e)}for(const n of s){const c=e[n];null==c||"object"!=typeof c?(l=!0,a[n]=null!=(r=null==(o=t.params)?void 0:o[n])?r:j):a[n]=c}return l?a:e}(l,s);const u=ee(s.searchStringToObject,n.location.search,function(e){let t;for(const n in e)if(e[n].urlName){const o=`${e[n].urlName}\0${n}`;t?t.push(o):t=[o]}return t?t.join("\n"):void 0}(i));s.includeAllParams&&(i=$(i,Object.keys(u),s.params,j));const d=a(u,i,H),m=Object.keys(i).join("\0");(0,r.useEffect)((()=>{const e=m.split("\0");return H.registerParams(e),()=>{H.unregisterParams(e)}}),[m]);const p={adapter:n,paramConfigMap:i,options:s},g=(0,r.useRef)(p);null==g.current&&(g.current=p),(0,r.useEffect)((()=>{g.current.adapter=n,g.current.paramConfigMap=i,g.current.options=s}),[n,i,s]);const[h]=(0,r.useState)((()=>(e,t)=>{const{adapter:n,paramConfigMap:o,options:r}=g.current;null==t&&(t=r.updateType),function(e,{immediate:t}={}){ie.push(e);let n=t?ce:se;1===ie.length&&n((()=>{const t=ie.slice();ie.length=0;const n=t[0].currentSearchString;let o;for(let e=0;e<t.length;++e)o=le(0===e?t[e]:{...t[e],currentSearchString:o});e.options.skipUpdateWhenNoChange&&o===n||function({searchString:e,adapter:t,navigate:n,updateType:o}){const r={...t.location,search:e};n&&("string"==typeof o&&o.startsWith("replace")?t.replace(r):t.push(r))}({searchString:null!=o?o:"",adapter:t[t.length-1].adapter,navigate:!0,updateType:t[t.length-1].updateType})}))}({changes:e,updateType:t,currentSearchString:n.location.search,paramConfigMap:o,options:r,adapter:n},{immediate:!r.enableBatching})}));return[d,h]}var de=ue;const me=(e,t,n)=>{const o=(0,r.useMemo)((()=>({[e]:null!=t?t:"inherit"})),[e,t]),[a,l]=de(o,n);return[a[e],(0,r.useCallback)(((t,n)=>l("function"==typeof t?n=>{const o=t(n[e]);return{[e]:o}}:{[e]:t},n)),[e,l])]},pe=({children:e})=>{var t;const{navigator:n}=(0,r.useContext)(k),o=T(),a=null==(t=(0,r.useContext)(S))?void 0:t.router,l=P();return e({replace(e){o(e.search||"?",{replace:!0,state:e.state})},push(e){o(e.search||"?",{replace:!1,state:e.state})},get location(){var e,t,o;return null!=(o=null!=(t=null==(e=null==a?void 0:a.state)?void 0:e.location)?t:null==n?void 0:n.location)?o:l}})};var ge=window.contentControl.data,he=window.wp.data,_e=window.wp.element,ve=n(184),fe=n.n(ve),Ee=window.wp.i18n,be=window.wp.hooks,we=window.contentControl.icons,ye=window.wp.components,Ce=window.contentControl.coreData,Se=window.contentControl.components,ke=window.wp.primitives,xe=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{fillRule:"evenodd",d:"M17.375 15.656A6.47 6.47 0 0018.5 12a6.47 6.47 0 00-.943-3.374l-1.262.813c.448.749.705 1.625.705 2.561a4.977 4.977 0 01-.887 2.844l1.262.813zm-1.951 1.87l-.813-1.261A4.976 4.976 0 0112 17c-.958 0-1.852-.27-2.613-.736l-.812 1.261A6.47 6.47 0 0012 18.5a6.47 6.47 0 003.424-.974zm-8.8-1.87A6.47 6.47 0 015.5 12c0-1.235.344-2.39.943-3.373l1.261.812A4.977 4.977 0 007 12c0 1.056.328 2.036.887 2.843l-1.262.813zm2.581-7.803A4.977 4.977 0 0112 7c1.035 0 1.996.314 2.794.853l.812-1.262A6.47 6.47 0 0012 5.5a6.47 6.47 0 00-3.607 1.092l.812 1.261zM12 20a8 8 0 100-16 8 8 0 000 16zm0-4.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7z",clipRule:"evenodd"})),Ne=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M7 13.8h6v-1.5H7v1.5zM18 16V4c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2zM5.5 16V4c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5zM7 10.5h8V9H7v1.5zm0-3.3h8V5.8H7v1.4zM20.2 6v13c0 .7-.6 1.2-1.2 1.2H8v1.5h11c1.5 0 2.7-1.2 2.7-2.8V6h-1.5z"})),Re=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M15.5 9.5a1 1 0 100-2 1 1 0 000 2zm0 1.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm-2.25 6v-2a2.75 2.75 0 00-2.75-2.75h-4A2.75 2.75 0 003.75 15v2h1.5v-2c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v2h1.5zm7-2v2h-1.5v-2c0-.69-.56-1.25-1.25-1.25H15v-1.5h2.5A2.75 2.75 0 0120.25 15zM9.5 8.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",fillRule:"evenodd"})),Pe=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M11 14.5l1.1 1.1 3-3 .5-.5-.6-.6-3-3-1 1 1.7 1.7H5v1.5h7.7L11 14.5zM16.8 5h-7c-1.1 0-2 .9-2 2v1.5h1.5V7c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v10c0 .3-.2.5-.5.5h-7c-.3 0-.5-.2-.5-.5v-1.5H7.8V17c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"}));const{adminUrl:Te,wpVersion:Le}=contentControlSettingsPage,Me={showNotice:!1,ignoreNotice:!1,retryView:""};var Be=({tabs:e})=>{const[t="restrictions",n]=me("view",j),o=(0,_e.useRef)(null),[a,l]=(0,_e.useState)(Me),{showNotice:c,ignoreNotice:s,retryView:i}=a,u=()=>l(Me),d=(0,he.useSelect)((e=>e(Ce.settingsStore).hasUnsavedChanges()),[]),{saveSettings:m}=(0,he.useDispatch)(Ce.settingsStore);return(0,_e.useEffect)((()=>{const e=e=>{d&&(e.preventDefault(),e.returnValue=!1)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[d]),(0,_e.useEffect)((()=>(d||u(),d&&!s||!i||n(i),()=>u())),[d,s]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"cc-settings-page__header"},(0,r.createElement)("h1",{className:"branding wp-heading-inline"},(0,Ee.__)("Content Control","content-control")),(0,r.createElement)(Se.ControlledTabPanel,{className:"tabs",orientation:"horizontal",selected:null!==t?t:void 0,onSelect:o=>{const r=e.find((e=>e.name===o));var c;r?.onClick&&!1===r.onClick()||(c=o,"settings"!==t||!d||s?n(c):l({...a,showNotice:!0,retryView:c}))},tabs:e}),(0,r.createElement)(ye.DropdownMenu,{label:(0,Ee.__)("Support","content-control"),icon:xe,toggleProps:Le>=6.2?{as:({onClick:e})=>(0,r.createElement)(ye.Button,{icon:xe,variant:"link",onClick:e,className:"components-tab-panel__tabs-item support-link"},(0,r.createElement)("span",{ref:o},(0,Ee.__)("Support","content-control")))}:void 0,popoverProps:{noArrow:!1,position:"bottom left",className:"cc-settings-page__support-menu",anchor:Le>=6.2?{getBoundingClientRect:()=>o?.current?.getBoundingClientRect()}:void 0}},(({onClose:e})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.MenuGroup,null,(0,r.createElement)(ye.MenuItem,{icon:Ne,href:"https://contentcontrolplugin.com/docs/?utm_campaign=plugin-support&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=view-documentation-link",target:"_blank"},(0,Ee.__)("View Documentation","content-control")),(0,r.createElement)(ye.MenuItem,{icon:Re,href:"https://contentcontrolplugin.com/support/?utm_campaign=plugin-support&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=get-support-link",target:"_blank"},(0,Ee.__)("Get Support","content-control"))),(0,r.createElement)(ye.MenuGroup,null,(0,r.createElement)(ye.MenuItem,{icon:Pe,onClick:()=>{window.location.href=`${Te}options-general.php?page=grant-content-control-access`,e()}},(0,Ee.__)("Grant Support Access","content-control"))))))),c&&(0,r.createElement)(ye.Modal,{title:(0,Ee.__)("Unsaved changes","content-control"),onRequestClose:()=>u()},(0,r.createElement)("p",null,(0,Ee.__)("Changes you made may not be saved.","content-control")),(0,r.createElement)(ye.Flex,{justify:"right"},(0,r.createElement)(ye.Button,{isDestructive:!0,onClick:()=>l({...a,showNotice:!1,ignoreNotice:!0}),text:(0,Ee.__)("Ignore","content-control")}),(0,r.createElement)(ye.Button,{variant:"primary",onClick:()=>m(),text:(0,Ee.__)("Save Settings","content-control")}))))},De=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})),Oe=window.contentControl.ruleEngine,Ae=n.n(Oe),Ue=()=>{const{isEditorActive:e,editorId:t}=(0,he.useSelect)((e=>{const t=e(Ce.restrictionsStore);return{editorId:t.getEditorId(),isEditorActive:t.isEditorActive()}}),[]),{changeEditorId:n}=(0,he.useDispatch)(Ce.restrictionsStore),[o,r]=ue({edit:z,add:I,tab:j}),a=()=>r({add:void 0,edit:void 0,tab:void 0}),{edit:l,add:c,tab:s}=o;return(0,_e.useEffect)((()=>{let e=l&&l>0?l:void 0;c&&(e="new"),e!==t&&n(e)}),[l,c,t,n]),(0,_e.useEffect)((()=>{c||l||e||a()}),[e,c,l]),{tab:s,setTab:e=>r({tab:e}),setEditorId:e=>{r({add:"new"===e||void 0,edit:"number"==typeof e&&e>0?e:void 0}),n(e)},clearEditorParams:a}},Fe=({values:e,updateSettings:t})=>(0,r.createElement)("div",{className:"content-tab"},(0,r.createElement)("h3",null,(0,Ee.__)("Apply this restriction if the user views content that is:","content-control")),(0,r.createElement)("p",null,(0,Ee.__)("When users visit your site, the plugin will check the viewed content against your selection below and permit or deny access.","content-control")),(0,r.createElement)(Ae(),{value:e.settings.conditions,onChange:e=>t({conditions:e}),options:{features:{notOperand:!0,groups:!0},rulesFilter:e=>Array.isArray(e.context)?!e.context.includes("user"):-1===["user"].indexOf(e.context)}})),Ve=window.contentControl.utils,je=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})),ze=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"}));const Ie=[{value:"logged_in",label:(0,Ee.__)("Logged In Users","content-control"),icon:we.lockedUser},{value:"logged_out",label:(0,Ee.__)("Logged Out Users","content-control"),icon:we.incognito}],He=[{value:"redirect",label:(0,Ee.__)("Redirect","content-control"),icon:we.protectedRedirect},{value:"replace",label:(0,Ee.__)("Replace Content","content-control"),icon:we.protectedMessage}],$e=[{value:"login",label:(0,Ee.__)("Login & Back","content-control"),icon:Pe},{value:"home",label:(0,Ee.__)("Home Page","content-control"),icon:ze},{value:"custom",label:(0,Ee.__)("Custom URL","content-control"),icon:De}],Ge=[{value:"message",label:(0,Ee.__)("Custom Message","content-control")},{value:"page",label:(0,Ee.__)("Use Existing Page","content-control")}],We=[{label:(0,Ee.__)("Filter the restricted items' title, excerpt, and content.","content-control"),value:"filter_post_content"},{label:(0,Ee.__)("Hide the restricted items from the archive page.","content-control"),value:"hide"},{label:(0,Ee.__)("Replace the entire archive page with a custom page.","content-control"),value:"replace_archive_page"},{label:(0,Ee.__)("Redirect to a different page.","content-control"),value:"redirect"}],Qe=[{label:(0,Ee.__)("Filter the restricted items' title, excerpt, and content.","content-control"),value:"filter_post_content"},{label:(0,Ee.__)("Hide the restricted items from the list page.","content-control"),value:"hide"}],{userRoles:qe}=contentControlSettingsPage;var Ye=({values:e,updateValues:t,updateSettings:n})=>{var o;const{settings:a}=e;let l=[];Array.isArray(a.userRoles)?l=a.userRoles:"object"==typeof a.userRoles&&(l=Object.entries(a.userRoles).map((([e])=>e)));const c=e.description.length/80,s=(0,Ve.clamp)(c,1,5);return(0,r.createElement)("div",{className:"general-tab"},(0,r.createElement)(ye.TextControl,{label:(0,Ee.__)("Restriction label","content-control"),hideLabelFromVision:!0,placeholder:(0,Ee.__)("Name…","content-control"),className:"title-field",value:e.title,onChange:e=>t({title:e})}),(0,r.createElement)(ye.TextareaControl,{rows:s,scrolling:s>5?"auto":"no",label:(0,Ee.__)("Restriction description","content-control"),hideLabelFromVision:!0,placeholder:(0,Ee.__)("Add description…","content-control"),className:"description-field",value:e.description,onChange:e=>t({description:e})}),e.title.length<=0&&(0,r.createElement)(ye.Notice,{status:"warning",isDismissible:!1,className:"title-field-notice"},(0,Ee.__)("Enter a label for this set.","content-control")),(0,r.createElement)(Se.RadioButtonControl,{label:(0,Ee.__)("Who can see this content?","content-control"),value:a.userStatus,onChange:e=>n({userStatus:e}),options:Ie,className:"userStatus-field"}),"logged_in"===a.userStatus&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.SelectControl,{label:(0,Ee.__)("User Role","content-control"),value:null!==(o=a.roleMatch)&&void 0!==o?o:"any",options:[{label:(0,Ee.__)("Any","content-control"),value:"any"},{label:(0,Ee.__)("Matching","content-control"),value:"match"},{label:(0,Ee.__)("Excluding","content-control"),value:"exclude"}],onChange:e=>n({roleMatch:e}),className:"is-large roleMatch-field"}),"any"!==a.roleMatch&&(0,r.createElement)(Se.SearchableMulticheckControl,{label:"exclude"===a.roleMatch?(0,Ee.__)("Roles to exclude","content-control"):(0,Ee.__)("Roles to include","content-control"),searchIcon:je,placeholder:(0,Ee.__)("Search roles…","content-control"),className:"is-large userRoles-field",value:l,onChange:e=>n({userRoles:e}),options:Object.entries(qe).map((([e,t])=>({value:e,label:t})))})))},Ke=({values:e,updateSettings:t})=>{const{settings:n}=e,o=n.customMessage?.length/80,a=(0,Ve.clamp)(o,4,20),l=e=>{switch(e){case"redirectType":return"redirect"===n.protectionMethod;case"redirectUrl":return"redirect"===n.protectionMethod&&"custom"===n.redirectType;case"replacementType":return"replace"===n.protectionMethod;case"replacementPage":return"replace"===n.protectionMethod&&"page"===n.replacementType;case"showExcerpts":case"overrideMessage":return"replace"===n.protectionMethod&&"message"===n.replacementType;case"customMessage":return"replace"===n.protectionMethod&&"message"===n.replacementType&&n.overrideMessage;case"archiveReplacementPage":return"replace_archive_page"===n.archiveHandling;case"archiveRedirectType":return"redirect"===n.archiveHandling;case"archiveRedirectUrl":return"redirect"===n.archiveHandling&&"custom"===n.archiveRedirectType;default:return!0}};return(0,r.createElement)("div",{className:"protection-tab"},(0,r.createElement)("h3",null,(0,Ee.__)("Protecting Content","content-control")),(0,r.createElement)("p",null,(0,Ee.__)("When a user does not have access, the following options help control their experience.","content-control")),(0,r.createElement)(Se.RadioButtonControl,{label:(0,Ee.__)("How do you want to protect your content?","content-control"),value:n.protectionMethod,onChange:e=>t({protectionMethod:e}),options:He}),l("redirectType")&&(0,r.createElement)(Se.RadioButtonControl,{label:(0,Ee.__)("Where will the user be taken?","content-control"),value:n.redirectType,onChange:e=>t({redirectType:e}),options:$e}),l("redirectUrl")&&(0,r.createElement)(Se.URLControl,{label:(0,Ee.__)("Custom Redirect URL","content-control"),className:"is-large",value:n.redirectUrl,onChange:({url:e})=>{t({redirectUrl:e})}}),l("replacementType")&&(0,r.createElement)(Se.RadioButtonControl,{label:(0,Ee.__)("Replacement Type","content-control"),value:n.replacementType,options:Ge,onChange:e=>t({replacementType:e})}),l("replacementPage")&&(0,r.createElement)(Se.EntitySelectControl,{label:(0,Ee.__)("Choose a page to replace the content with.","content-control"),placeholder:(0,Ee.__)("Choose a page to replace the content with.","content-control"),value:n.replacementPage,multiple:!1,onChange:e=>t({replacementPage:e}),entityKind:"postType",entityType:"page",closeOnSelect:!0}),l("showExcerpts")&&(0,r.createElement)(ye.CheckboxControl,{label:(0,Ee.__)("Show excerpts above access denied message?","content-control"),checked:n.showExcerpts,onChange:e=>t({showExcerpts:e})}),l("overrideMessage")&&(0,r.createElement)(ye.CheckboxControl,{label:(0,Ee.__)("Override the default message?","content-control"),checked:n.overrideMessage,onChange:e=>t({overrideMessage:e}),help:(0,Ee.__)("Edit the default message via the plugin's Settings page.","content-control")}),l("customMessage")&&(0,r.createElement)(ye.TextareaControl,{label:(0,Ee.__)("Enter a custom message to display to restricted users","content-control"),rows:a,value:n.customMessage,onChange:e=>t({customMessage:e})}),l("archiveHandling")&&(0,r.createElement)(ye.RadioControl,{label:(0,Ee.__)("Handling matches within archives","content-control"),help:(0,Ee.__)("Choose how to handle matched content found within archive pages. This option applies to restricted content within the archive page, not the archive page itself.","content-control"),selected:n.archiveHandling,options:We,onChange:e=>t({archiveHandling:e})}),l("archiveReplacementPage")&&(0,r.createElement)(Se.EntitySelectControl,{label:(0,Ee.__)("Choose a page to replace the archive with","content-control"),placeholder:(0,Ee.__)("Choose a page to replace the archive with","content-control"),value:n.archiveReplacementPage,multiple:!1,onChange:e=>t({archiveReplacementPage:e}),entityKind:"postType",entityType:"page",closeOnSelect:!0}),l("archiveRedirectType")&&(0,r.createElement)(Se.RadioButtonControl,{label:(0,Ee.__)("Where will the user be taken?","content-control"),value:n.archiveRedirectType,onChange:e=>t({archiveRedirectType:e}),options:$e}),l("archiveRedirectUrl")&&(0,r.createElement)(Se.URLControl,{label:(0,Ee.__)("Custom Redirect URL","content-control"),className:"is-large",value:n.archiveRedirectUrl,onChange:({url:e})=>{t({archiveRedirectUrl:e})}}),l("additionalQueryHandling")&&(0,r.createElement)(ye.RadioControl,{label:(0,Ee.__)("Handling matches everywhere else","content-control"),help:(0,Ee.__)("Choose how to handle matched content in all other areas outside the main content. This option applies to restricted content found in non-main queries, sidebars, widgets, footers, or within the page content itself.","content-control"),selected:n.additionalQueryHandling,options:Qe,onChange:e=>t({additionalQueryHandling:e})}))};const Je=()=>{};var Ze=({onSave:e=Je,onClose:t=Je})=>{const{tab:n,setTab:o,clearEditorParams:a}=Ue(),[l,c]=(0,_e.useState)(!1),[s,i]=(0,_e.useState)(null),{editorId:u,isEditorActive:d,values:m,isSaving:p,dispatchStatus:g,dispatchErrors:h}=(0,he.useSelect)((e=>({editorId:e(Ce.restrictionsStore).getEditorId(),values:e(Ce.restrictionsStore).getEditorValues(),isEditorActive:e(Ce.restrictionsStore).isEditorActive(),isSaving:e(Ce.restrictionsStore).isDispatching(["createRestriction","updateRestriction"]),dispatchStatus:{create:e(Ce.restrictionsStore).getDispatchStatus("createRestriction"),update:e(Ce.restrictionsStore).getDispatchStatus("updateRestriction")},dispatchErrors:{create:e(Ce.restrictionsStore).getDispatchError("createRestriction"),update:e(Ce.restrictionsStore).getDispatchError("updateRestriction")}})),[]),{updateEditorValues:_,createRestriction:v,updateRestriction:f,clearEditorData:E}=(0,he.useDispatch)(Ce.restrictionsStore);if((0,_e.useEffect)((()=>a),[]),(0,_e.useEffect)((()=>{var e;if(!l)return;if(Ce.Status.Success===g.create||Ce.Status.Success===g.update)return void b();const t=null!==(e=h.create)&&void 0!==e?e:h.update;void 0!==t&&i(t)}),[g,h]),!d)return null;if(!u)return(0,r.createElement)(r.Fragment,null,(0,Ee.__)("Editor requires a valid id","content-control"));if(!m)return(0,r.createElement)(r.Fragment,null,(0,Ee.__)("Editor requires a valid restriction.","content-control"));const b=()=>{E(),t()},w={values:m,updateValues:_,updateSettings:e=>{_({...m,settings:{...m?.settings,...e}})},onSave:e,onClose:t},y=(0,be.applyFilters)("contentControl.restrictionEditor.tabs",[{name:"general",title:(0,Ee.__)("General","content-control"),comp:()=>(0,r.createElement)(Ye,{...w})},{name:"protection",title:(0,Ee.__)("Protection","content-control"),comp:()=>(0,r.createElement)(Ke,{...w})},{name:"content",title:(0,Ee.__)("Content","content-control"),comp:()=>(0,r.createElement)(Fe,{...w})}]);if("object"==typeof s&&s?.tabName?.length){const e=y.find((e=>e.name===s.tabName));e&&(y[y.indexOf(e)].className=y[y.indexOf(e)].className?y[y.indexOf(e)].className+" error":"error")}const C=(0,Ee.sprintf)(
// translators: 1. Id of set to edit.
(0,Ee.__)("Restriction Editor%s","content-control"),"new"===u?": "+(0,Ee.__)("New Restriction","content-control"):`: #${m.id} - ${m.title}`);return(0,r.createElement)(ye.Modal,{title:C,className:"restriction-editor",onRequestClose:()=>b(),shouldCloseOnClickOutside:!1},(0,r.createElement)("div",{className:fe()(["restriction-enabled-toggle","publish"===m.status?"enabled":"disabled"])},(0,r.createElement)(ye.ToggleControl,{label:"publish"===m.status?(0,Ee.__)("Enabled","content-control"):(0,Ee.__)("Disabled","content-control"),checked:"publish"===m.status,onChange:e=>_({...m,status:e?"publish":"draft"})})),s&&(0,r.createElement)(ye.Notice,{status:"error",className:"restriction-editor-error",onDismiss:()=>{i(null)}},"string"==typeof s?s:s.message),(0,r.createElement)(ye.TabPanel,{orientation:"vertical",initialTabName:null!=n?n:"general",onSelect:o,tabs:y,className:"editor-tabs"},(({title:e,comp:t})=>void 0===t?e:t())),(0,r.createElement)("div",{className:"modal-actions"},(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Cancel","content-control"),variant:"tertiary",isDestructive:!0,onClick:()=>b(),disabled:p,className:"cancel-button"}),(0,r.createElement)(ye.Button,{variant:"primary",disabled:p,onClick:()=>{const t=(0,Ce.validateRestriction)(m);!0===t?function(){if(!u||!m)return;const t="new"!==u&&u>0,n={...m,settings:{...m.settings,conditions:(0,Oe.removeEmptyItems)(m.settings.conditions)}};t?f(n):v(n),c(!0),i(null),e(n)}():"object"==typeof t&&i(t)}},p&&(0,r.createElement)(ye.Spinner,null),"new"===u?(0,Ee.__)("Add Restriction","content-control"):(0,Ee.__)("Save Restriction","content-control")),(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Documentation","content-control"),href:"https://contentcontrolplugin.com/docs/?utm_campaign=documentation&utm_source=restriction-editor&utm_medium=plugin-ui&utm_content=footer-documentation-link",target:"_blank",icon:De,iconSize:20})))},Xe=()=>{const{setEditorId:e}=Ue(),{restrictions:t,isLoading:n}=(0,he.useSelect)((e=>{const t=e(Ce.restrictionsStore);return{restrictions:t.getRestrictions(),isLoading:t.isResolving("getRestrictions")}}),[]),o=t.length;return(0,r.createElement)("header",{className:"cc-settings-view__header"},(0,r.createElement)("h1",{className:"view-title wp-heading-inline"},(0,Ee.__)("Restrictions","content-control")),(0,r.createElement)("span",{className:"item-count"},n?(0,r.createElement)(ye.Spinner,null):(0,Ee.sprintf)(/* translators: 1. Number of items */
(0,Ee._n)("%d item","%d items",o,"content-control"),o)),(0,r.createElement)(ye.Button,{className:"add-restriction",onClick:()=>e("new"),variant:"primary"},(0,Ee.__)("Add Restriction","content-control")))},et=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),tt=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),nt=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})),ot=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"}));const rt=()=>{},at={restrictions:[],filteredRestrictions:[],bulkSelection:[],setBulkSelection:rt,updateRestriction:rt,deleteRestriction:rt,increasePriority:rt,decreasePriority:rt,swapPriority:rt,updatePrioritySortOrder:rt,isLoading:!1,isDeleting:!1,filters:{roles:"",status:"all",searchText:"",restrictedTo:""},setFilters:rt},lt=(0,_e.createContext)(at),{Provider:ct,Consumer:st}=lt,it=({value:e={},children:t})=>{const[n,o]=(0,_e.useState)([]),[a,l]=ue({roles:F(j,""),status:F(j,"all"),searchText:F(j,""),restrictedTo:F(j,"")}),c=()=>l({status:void 0,searchText:void 0});(0,_e.useEffect)((()=>c),[]);const{restrictions:s,isLoading:i,isDeleting:u}=(0,he.useSelect)((e=>{const t=e(Ce.restrictionsStore);return{restrictions:t.getRestrictions(),isLoading:t.isResolving("getRestrictions"),isDeleting:t.isDispatching("deleteRestriction")}}),[]),{updateRestriction:d,deleteRestriction:m}=(0,he.useDispatch)(Ce.restrictionsStore),p=(0,_e.useMemo)((()=>{var e;const t=""===a?.roles?[]:null!==(e=a?.roles?.trim().split(","))&&void 0!==e?e:[];return s.filter((e=>!t.length||t.some((t=>e.settings.userRoles?.includes(t))))).filter((e=>""===a.restrictedTo||e.settings.userStatus===a.restrictedTo)).filter((e=>"all"===a.status||a.status===e.status)).filter((e=>!a.searchText||!a.searchText.length||e.title.toLowerCase().indexOf(a.searchText.toLowerCase())>=0||e.description.toLowerCase().indexOf(a.searchText.toLowerCase())>=0))}),[s,a]),g=(e,t)=>{const n=[...p],o=n[e],r=n[t];o&&r&&(n[e]=r,n[t]=o,h(n))},h=e=>{let t=!1;const n=(e||p).map(((e,n)=>e.priority!==n?(t=!0,{...e,priority:n}):e));t&&n.forEach((e=>d(e)))};return(0,r.createElement)(ct,{value:{...e,filters:a,setFilters:l,bulkSelection:n,setBulkSelection:o,restrictions:s,filteredRestrictions:p,updateRestriction:d,deleteRestriction:m,increasePriority:e=>{g(e,e-1)},decreasePriority:e=>{g(e,e+1)},swapPriority:g,updatePrioritySortOrder:h,isLoading:i,isDeleting:u}},t)},ut=()=>(0,_e.useContext)(lt);var dt=(0,r.createElement)(ke.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(ke.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})),mt=(0,r.createElement)(ke.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(ke.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),pt=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})),gt=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})),ht=(0,r.createElement)(ke.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(ke.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"}));const _t=e=>{const{id:t,slug:n,status:o,title:r,description:a,settings:l}=e;return{id:t,slug:n,status:o,title:r,description:a,settings:l}},{version:vt}=contentControlSettingsPage;var ft=()=>{const e=(0,he.useRegistry)(),{bulkSelection:t=[],setBulkSelection:n,restrictions:o=[],deleteRestriction:a,updateRestriction:l}=ut(),{getRestriction:c}=(0,he.useSelect)((e=>({getRestriction:e(Ce.restrictionsStore).getRestriction})),[]),{addNotice:s}=(0,he.useDispatch)(Ce.restrictionsStore),[i,u]=(0,_e.useState)(),d=(0,_e.useRef)();return 0===t.length?null:(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Se.ConfirmDialogue,{...i,onClose:()=>u(void 0)}),(0,r.createElement)(ye.Dropdown,{className:"list-table-bulk-actions",contentClassName:"list-table-bulk-actions__popover",placement:"bottom left",focusOnMount:"firstElement",popoverProps:{noArrow:!1,anchor:{getBoundingClientRect:()=>d?.current?.getBoundingClientRect()}},renderToggle:({isOpen:e,onToggle:n})=>(0,r.createElement)(ye.Flex,null,(0,r.createElement)("span",{className:"selected-items"},(0,Ee.sprintf)(
// translators: 1. number of items.
(0,Ee._n)("%d item selected","%d items selected",t.length,"content-control"),t.length)),(0,r.createElement)(ye.Button,{className:"popover-toggle",ref:e=>{d.current=e},"aria-label":(0,Ee.__)("Bulk Actions","content-control"),variant:"secondary",onClick:n,"aria-expanded":e,icon:we.checkAll,iconSize:20},(0,Ee.__)("Bulk Actions","content-control"),(0,r.createElement)(ye.Icon,{className:"toggle-icon",icon:e?dt:mt}))),renderContent:()=>(0,r.createElement)(ye.NavigableMenu,{orientation:"vertical"},(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Export Selected","content-control"),icon:pt,onClick:()=>{const e={version:vt,restrictions:o.filter((({id:e})=>t.indexOf(e)>=0)).map(_t)};(0,Ve.saveFile)(JSON.stringify(e),"content-control-restrictions.json","text/json")}}),(0,r.createElement)("hr",null),(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Enable","content-control"),icon:De,onClick:()=>{e.batch((()=>{const e=t.length;t.forEach((e=>{const t=c(e);t?.id===e&&l({...t,status:"publish"})})),n([]),s({id:"bulk-enable",type:"success",message:(0,Ee.sprintf)(
// translators: 1. number of items
(0,Ee._n)("%d restriction enabled.","%d restrictions enabled.",e,"content-control"),e),closeDelay:3e3})}))}}),(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Disable","content-control"),icon:gt,onClick:()=>{e.batch((()=>{const e=t.length;t.forEach((e=>{const t=c(e);t?.id===e&&l({...t,status:"draft"})})),n([]),s({id:"bulk-disable",type:"success",message:(0,Ee.sprintf)(
// translators: 1. number of items
(0,Ee._n)("%d restriction disabled.","%d restrictions disabled.",e),e),closeDelay:3e3})}))}}),(0,r.createElement)("hr",null),(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Trash","content-control"),icon:tt,onClick:()=>{u({isDestructive:!0,message:(0,Ee.sprintf)(
// translators: 1. number of items
(0,Ee.__)("Are you sure you want to trash %d items?","content-control"),t.length),callback:()=>{e.batch((()=>{const e=t.length;t.forEach((e=>a(e))),n([]),s({id:"bulk-trash",type:"success",message:(0,Ee.sprintf)(
// translators: 1. number of items
(0,Ee._n)("%d restriction moved to trash.","%d restrictions moved to trash.",e),e),closeDelay:3e3})}))}})}}),(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Delete Permanently","content-control"),icon:ht,isDestructive:!0,onClick:()=>{u({isDestructive:!0,message:(0,Ee.sprintf)(
// translators: 1. restriction label.
(0,Ee.__)("Are you sure you want to premanently delete %d items?","content-control"),t.length),callback:()=>{e.batch((()=>{const e=t.length;t.forEach((e=>a(e,!0))),n([]),s({id:"bulk-delete",type:"success",message:(0,Ee.sprintf)(
// translators: 1. number of items
(0,Ee._n)("%d restriction deleted.","%d restrictions deleted.",e),e),closeDelay:3e3})}))}})}}))}))},Et=window.contentControl.fields;const{userRoles:bt}=contentControlSettingsPage,wt={all:(0,Ee.__)("All","content-control"),publish:(0,Ee.__)("Enabled","content-control"),draft:(0,Ee.__)("Disabled","content-control"),pending:(0,Ee.__)("Pending","content-control"),trash:(0,Ee.__)("Trash","content-control")};var yt=()=>{var e,t,n,o,a;const{filters:l={},setFilters:c,bulkSelection:s=[],filteredRestrictions:i=[]}=ut(),[u,d]=(0,_e.useState)(""),m=(0,_e.useRef)({}),p=(0,_e.useMemo)((()=>i.reduce(((e,t)=>{var n;return e[t.status]=(null!==(n=e[t.status])&&void 0!==n?n:0)+1,e.all++,e}),{all:0})),[i]);if(s.length>0)return null;const g=({name:e,label:t,currentSelection:n,children:o})=>{const a=u===e;return(0,r.createElement)("div",{className:fe()([`list-table-filter list-table-filter--${e}`,a?"is-active":""])},(0,r.createElement)(ye.Button,{className:"filter-button",onClick:()=>d(a?"":e),ref:t=>{m.current[e]=t}},(0,r.createElement)("span",{className:"filter-label"},t,":")," ",(0,r.createElement)("span",{className:"filter-selection"},n),(0,r.createElement)(ye.Icon,{className:"filter-icon",icon:a?dt:mt})),a&&(0,r.createElement)(ye.Popover,{className:"list-table-filters__popover",anchor:{getBoundingClientRect:()=>m.current[e].getBoundingClientRect()},onClose:()=>d(""),position:"bottom right",onFocusOutside:()=>d("")},o))},h=""===l?.roles?[]:null!==(e=l?.roles?.trim().split(","))&&void 0!==e?e:[],_=[{label:(0,Ee.__)("All","content-control"),value:""},{label:(0,Ee.__)("Logged In","content-control"),value:"logged_in"},{label:(0,Ee.__)("Logged Out","content-control"),value:"logged_out"}];return(0,r.createElement)("div",{className:"list-table-filters"},(0,r.createElement)(g,{name:"role",label:(0,Ee.__)("Role","content-control"),currentSelection:(()=>{switch(h.length){case 0:return(0,Ee.__)("All","content-control");case 1:return bt[h[0]];case 2:return h.map((e=>{var t;return null!==(t=bt[e])&&void 0!==t?t:""})).join(", ");default:return h.slice(0,1).map((e=>{var t;return null!==(t=bt[e])&&void 0!==t?t:""})).join(", ")+` +${h.length-1} more`}})()},(0,r.createElement)(Et.MulticheckField,{label:(0,Ee.__)("Role","content-control"),value:h,options:Object.entries(bt).map((([e,t])=>({value:e,label:t}))),onChange:e=>{c({roles:e.join(",")}),d("")},type:"multicheck",id:""})),(0,r.createElement)(g,{name:"who",label:(0,Ee.__)("Restricted To","content-control"),currentSelection:null!==(t=_.find((e=>e.value===l?.restrictedTo))?.label)&&void 0!==t?t:""},(0,r.createElement)(ye.RadioControl,{label:(0,Ee.__)("Restricted To","content-control"),selected:null!==(n=l?.restrictedTo)&&void 0!==n?n:"",options:_,onChange:e=>{c({restrictedTo:e}),d("")}})),(0,r.createElement)(g,{name:"status",label:(0,Ee.__)("Status","content-control"),currentSelection:wt[null!==(o=l?.status)&&void 0!==o?o:""]},(0,r.createElement)(ye.RadioControl,{label:(0,Ee.__)("Status","content-control"),hideLabelFromVision:!0,selected:null!==(a=l?.status)&&void 0!==a?a:"",options:Object.entries(wt).filter((([e])=>{return t=e,p?.[t]>0;var t})).map((([e,t])=>{var n;return{label:`${t} (${null!==(n=p[e])&&void 0!==n?n:0})`,value:e}})),onChange:e=>{c({status:e}),d("")}})))},Ct=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),St=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})),kt=()=>{const{createRestriction:e,addNotice:t}=(0,he.useDispatch)(Ce.restrictionsStore),{getNextPriority:n}=(0,he.useSelect)((e=>({getNextPriority:e(Ce.restrictionsStore).getNextPriority})),[]),o=o=>{const r=JSON.parse(o);if(!r?.restrictions?.length)return;let a=0,l=n();if(r.restrictions.forEach((t=>{try{e({...t,status:"draft",priority:l})}catch(e){a++}l++})),a&&t({id:"content-control-import-error",type:"error",message:(0,Ee.sprintf)(
// translators: %d is the number of restrictions that failed to import.
(0,Ee._n)("%d Restriction failed to import.","%d Restrictions failed to import.",a,"content-control"),a),isDismissible:!0}),a===r?.restrictions?.length)return;const c=r?.restrictions?.length-a;t({id:"content-control-import-success",type:"success",message:(0,Ee.sprintf)(
// translators: %d is the number of restrictions imported.
(0,Ee._n)("%d Restriction imported successfully.","%d Restrictions imported successfully.",c,"content-control"),c),isDismissible:!0,closeDelay:5e3})};return(0,r.createElement)(ye.Dropdown,{className:"list-table-options-menu",contentClassName:"list-table-options-menu__popover",placement:"bottom left",focusOnMount:"firstElement",popoverProps:{noArrow:!1},renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)(ye.Button,{className:"popover-toggle","aria-label":(0,Ee.__)("Additional options","content-control"),onClick:t,"aria-expanded":e,icon:Ct}),renderContent:({onClose:e})=>(0,r.createElement)(ye.NavigableMenu,{orientation:"vertical"},(0,r.createElement)(ye.FormFileUpload,{icon:St,text:(0,Ee.__)("Import","content-control"),accept:"text/json",onChange:t=>{var n;const r=null!==(n=t.currentTarget.files?.length)&&void 0!==n?n:0;for(let e=0;e<r;e++)t.currentTarget.files?.[e].text().then(o);e()}}))})},xt=()=>{const{setEditorId:e}=Ue(),[t,n]=(0,_e.useState)(!1),[o,a]=(0,_e.useState)(),l=()=>a(void 0);return(0,r.createElement)(it,null,(0,r.createElement)(st,null,(({isLoading:c,isDeleting:s,bulkSelection:i=[],setBulkSelection:u=Ve.noop,filteredRestrictions:d=[],updateRestriction:m=Ve.noop,deleteRestriction:p=Ve.noop,increasePriority:g=Ve.noop,decreasePriority:h=Ve.noop,filters:{searchText:_=""},setFilters:v})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Se.ConfirmDialogue,{...o,onClose:l}),(0,r.createElement)("div",{className:"list-table-container"},c&&(0,r.createElement)("div",{className:"is-loading"},(0,r.createElement)(ye.Spinner,null)),(0,r.createElement)("div",{className:"list-table-header"},(0,r.createElement)("div",{className:"list-search"},(0,r.createElement)(ye.Icon,{icon:je}),(0,r.createElement)(ye.TextControl,{placeholder:(0,Ee.__)("Search Restrictions…","content-control"),value:null!=_?_:"",onChange:e=>v({searchText:""!==e?e:void 0})})),(0,r.createElement)(ft,null),0===i.length&&(0,r.createElement)(ye.Button,{className:"filters-toggle",variant:"secondary",onClick:()=>{n(!t)},"aria-expanded":t,icon:we.filterLines,iconSize:20,text:t?(0,Ee.__)("Hide Filters","content-control"):(0,Ee.__)("Filters","content-control")}),(0,r.createElement)(kt,null)),t&&(0,r.createElement)(yt,null),(0,r.createElement)(Se.ListTable,{selectedItems:i,onSelectItems:e=>u(e),items:c?[]:d,columns:{enabled:()=>(0,r.createElement)(ye.Tooltip,{text:(0,Ee.__)("Enable or disable the restriction","content-control"),position:"top right"},(0,r.createElement)("span",null,(0,r.createElement)(ye.Icon,{icon:et}))),title:(0,Ee.__)("Name","content-control"),description:(0,Ee.__)("Description","content-control"),restrictedTo:(0,Ee.__)("Restricted to","content-control"),status:(0,Ee.__)("Status","content-control"),roles:(0,Ee.__)("Roles","content-control"),priority:(0,Ee.__)("Priority","content-control")},sortableColumns:["priority","title"],rowClasses:e=>[`restriction-${e.id}`,`status-${e.status}`],renderCell:(t,n)=>{var o,l,c;const i=n.status,u="trash"===i,_="publish"===i;switch(t){case"enabled":return(0,r.createElement)(ye.ToggleControl,{label:"","aria-label":(0,Ee.__)("Enable or disable the restriction","content-control"),checked:_,disabled:u,onChange:e=>{m({...n,status:e?"publish":"draft"})}});case"status":return u?(0,r.createElement)(ye.Icon,{"aria-label":(0,Ee.__)("In Trash","content-control"),icon:tt,size:20}):(0,r.createElement)("span",null,_?(0,Ee.__)("Enabled","content-control"):(0,Ee.__)("Disabled","content-control"));case"title":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.Button,{variant:"link",onClick:()=>e(n.id)},n.title),(0,r.createElement)("div",{className:"item-actions"},`${(0,Ee.__)("ID","content-control")}: ${n.id}`,(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Edit","content-control"),variant:"link",onClick:()=>e(n.id)}),(0,r.createElement)(ye.Button,{text:u?(0,Ee.__)("Untrash","content-control"):(0,Ee.__)("Trash","content-control"),variant:"link",isDestructive:!0,isBusy:!!s,onClick:()=>u?m({...n,status:"draft"}):p(n.id)}),u&&(0,r.createElement)(ye.Button,{text:(0,Ee.__)("Delete Permanently","content-control"),variant:"link",isDestructive:!0,isBusy:!!s,onClick:()=>a({message:(0,Ee.__)("Are you sure you want to premanently delete this restriction?"),callback:()=>{p(n.id,!0)},isDestructive:!0})})));case"restrictedTo":return"logged_in"===n.settings.userStatus?(0,r.createElement)(ye.Flex,null,(0,r.createElement)(ye.Icon,{icon:we.lockedUser,size:20}),(0,r.createElement)("span",null,(0,Ee.__)("Logged in users","content-control"))):(0,r.createElement)(ye.Flex,null,(0,r.createElement)(ye.Icon,{icon:we.incognito,size:20}),(0,r.createElement)("span",null,(0,Ee.__)("Logged out users","content-control")));case"roles":{const{userRoles:e,userStatus:t,roleMatch:o="any"}=n.settings;return"logged_out"===t||"any"===o||0===e.length?(0,r.createElement)(ye.Flex,null,(0,r.createElement)("span",null,(0,Ee.__)("Everyone","content-control"))):(0,r.createElement)(ye.Flex,null,"exclude"===o&&(0,Ee._n)("Exclude:","Excludes:",e.length,"content-control"),e.slice(0,2).map((e=>(0,r.createElement)("span",{key:e},e))),e.length>2&&(0,r.createElement)("span",{className:"remaining"},"+"+(e.length-2)))}case"priority":return(0,r.createElement)(ye.Flex,{gap:0},(0,r.createElement)("strong",null,(null!==(o=n.priority)&&void 0!==o?o:0)+1),(0,r.createElement)(ye.Button,{className:"priority-up",variant:"link",disabled:0===n.priority,iconSize:18,icon:nt,onClick:()=>{g(n.priority)}}),(0,r.createElement)(ye.Button,{className:"priority-down",variant:"link",disabled:d.length-1===n.priority,iconSize:18,icon:ot,onClick:()=>{h(n.priority)}}));default:return null!==(l=null!==(c=n[t])&&void 0!==c?c:n.settings[t])&&void 0!==l?l:""}}}))))))},Nt=()=>{const e=(0,_e.useRef)({}),{notices:t}=(0,he.useSelect)((e=>({notices:e(Ce.restrictionsStore).getNotices()})),[]),{clearNotice:n}=(0,he.useDispatch)(Ce.restrictionsStore),o=(0,_e.useCallback)((t=>{e.current[t]&&(clearTimeout(e.current[t]),delete e.current[t]),n(t)}),[n]);return(0,_e.useLayoutEffect)((()=>{t.forEach((t=>{if(t.closeDelay){if(e.current[t.id])return;e.current[t.id]=setTimeout((()=>{o(t.id)}),t.closeDelay)}}))}),[t,o]),t.length?(0,r.createElement)("div",{className:"notices"},t.map((e=>(0,r.createElement)(ye.Notice,{key:e.id,status:e.type,isDismissible:e.isDismissible,onRemove:()=>o(e.id)},e.message)))):null};const{hasSettingsUpgrades:Rt,hasRestrictionUpgrades:Pt}=contentControlSettingsPage;var Tt=e=>{const{type:t}=e,n="settings"===t?Rt:Pt;return(0,r.createElement)(r.Fragment,null,n&&(0,r.createElement)("div",{className:"has-upgrades"},(0,r.createElement)("span",null,(()=>{switch(t){case"settings":return(0,Ee.__)("You have upgrades available for your plugin settings.","content-control");case"restrictions":return(0,Ee.__)("You have upgrades available for your restrictions.","content-control");default:return""}})()," ⤴")))};const{permissions:{edit_restrictions:Lt}}=contentControlSettingsPage;var Mt=()=>{const e=(0,he.useSelect)((e=>e(Ce.restrictionsStore).isEditorActive()),[]);return Lt?(0,r.createElement)("div",{className:"restriction-list"},(0,r.createElement)(Tt,{type:"restrictions"}),(0,r.createElement)(Nt,null),(0,r.createElement)(Xe,null),(0,r.createElement)(xt,null),e&&(0,r.createElement)(Ze,null)):(0,r.createElement)("div",{className:"restriction-list permission-denied"},(0,r.createElement)(Nt,null),(0,r.createElement)("h3",null,(0,Ee.__)("Permission Denied","content-control")),(0,r.createElement)("p",null,(0,r.createElement)("strong",null,(0,Ee.__)("You do not have permission to manage Content Control settings.","content-control"))))},Bt=({tabs:e})=>{const[t,n]=me("tab",j),{isSaving:o,saveSettings:a,hasUnsavedChanges:l}=(0,Ce.useSettings)();return(0,r.createElement)("div",{className:"cc-settings-view__header"},(0,r.createElement)("div",{className:"header-top-bar"},(0,r.createElement)("h1",{className:"wp-heading-inline"},(0,Ee.__)("Settings","content-control")),(0,r.createElement)(ye.Button,{variant:"primary",disabled:o||!l,className:"save-settings",onClick:()=>a()},o&&(0,r.createElement)(ye.Spinner,null),(0,Ee.__)("Save Settings","content-control"))),(0,r.createElement)(Se.ControlledTabPanel,{className:"tabs",orientation:"horizontal",selected:null!==t?t:void 0,onSelect:t=>{const o=e.find((e=>e.name===t));o?.onClick&&!1===o.onClick()||n(t)},tabs:e},(()=>(0,r.createElement)(r.Fragment,null))))},Dt=({name:e,title:t,badge:n,icon:o,children:a})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.Panel,{className:fe()("settings-section-panel",e?`settings-section-panel--${e}`:"")},(0,r.createElement)("div",{className:"components-panel__header"},o&&(0,r.createElement)("span",{className:"panel-icon"},(0,r.createElement)(ye.Icon,{icon:o})),(0,r.createElement)("span",{className:"panel-title"},t),n&&(0,r.createElement)("span",{className:"panel-badge"},n)),(0,r.createElement)(ye.PanelBody,null,a))),Ot=()=>{const{settings:{excludedBlocks:e=[]},stageUnsavedChanges:t}=(0,Ce.useSettings)(),{knownBlockTypes:n=[]}=(0,he.useSelect)((e=>({knownBlockTypes:e(Ce.settingsStore).getKnownBlockTypes()})),[]),[o,a]=(0,_e.useState)(""),l=t=>e?.indexOf(t)>=0,c=(0,be.applyFilters)("contentControl.settingsPage.knownBlockTypes",n),s=(0,_e.useMemo)((()=>o&&0!==o.length?c.filter((({title:e,description:t="",keywords:n,category:r=""})=>-1===[...o.split(" ").map((o=>{const a=o.trim().toLowerCase();return e.trim().toLowerCase().indexOf(a)>=0||t.trim().toLowerCase().indexOf(a)>=0||r.trim().toLowerCase().indexOf(a)>=0||void 0!==n?.find((e=>e.trim().toLowerCase().indexOf(a)>=0))}))].indexOf(!1))):c),[o,c]);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("header",null,(0,r.createElement)("div",{className:"block-info"},(0,r.createElement)("h3",null,(0,Ee.__)("Available Blocks","content-control")),(0,r.createElement)("p",null,(0,Ee.__)("Control which blocks controls will be available for.","content-control"))),(0,r.createElement)("div",{className:"block-search"},(0,r.createElement)(ye.Icon,{icon:je}),(0,r.createElement)(ye.TextControl,{placeholder:(0,Ee.__)("Search Blocks…","content-control"),value:o,onChange:a}),(0,r.createElement)(ye.Flex,{justify:"space-around"},(0,r.createElement)(ye.Button,{variant:"link",onClick:()=>{const n=s.map((e=>e.name)).filter((t=>l(t)&&e.includes(t)));t({excludedBlocks:e.filter((e=>!n.includes(e)))})}},(0,Ee.__)("Enable All","content-control")),(0,r.createElement)(ye.Button,{variant:"link",onClick:()=>{const n=s.map((e=>e.name)).filter((t=>!l(t)&&!e.includes(t)));t({excludedBlocks:[...e.filter((e=>!n.includes(e))),...n]})}},(0,Ee.__)("Disable All","content-control"))))),(0,r.createElement)("div",{className:"block-list"},c.length>0?s.map((({name:n,title:o,description:a})=>{const c=l(n);return(0,r.createElement)("div",{key:n,className:fe()("block-list-item",c&&"is-disabled")},(0,r.createElement)("div",{className:"block-icon"},(0,r.createElement)(ye.Icon,{icon:we.block,size:30})),(0,r.createElement)("div",{className:"block-info"},(0,r.createElement)("h4",{className:"block-name"},o),a&&(0,r.createElement)("p",{className:"block-description"},a)),(0,r.createElement)("div",{className:"block-toggle"},(0,r.createElement)(ye.ToggleControl,{label:c?(0,Ee.__)("Disabled","content-control"):(0,Ee.__)("Enabled","content-control"),hideLabelFromVision:!0,checked:!c,onChange:()=>{return t({excludedBlocks:l(o=n)?e.filter((e=>o!==e)):[...e,o]});var o}})))})):(0,r.createElement)(ye.Notice,{status:"warning",isDismissible:!1},(0,Ee.__)("If there are no blocks shown when you load this page, you may need to open the editor for a few different pages & posts to index the list of block types.","content-control"))))},At=()=>{const[,e]=ue({tab:j,view:j}),{settings:t,stageUnsavedChanges:n}=(0,Ce.useSettings)(),o=(0,be.applyFilters)("contentControl.settingsPage.customMediaQueries",[{id:"mobile",name:(0,Ee.__)("Mobile","content-control"),description:"",type:"__built_in"},{id:"tablet",name:(0,Ee.__)("Tablet","content-control"),description:"",type:"__built_in"},{id:"desktop",name:(0,Ee.__)("Desktop","content-control"),description:"",type:"__built_in"}]);return(0,r.createElement)(r.Fragment,null,o.map((({id:e,name:o,description:a,type:l})=>{var c;const s=null!==(c=t.mediaQueries?.[e])&&void 0!==c?c:{},{override:i=!1,breakpoint:u=""}=s;return(0,r.createElement)("div",{key:o,className:"field-group"},(0,r.createElement)("div",{className:"field-group__label"},(0,r.createElement)("h3",null,o),a&&(0,r.createElement)("p",null,a)),(0,r.createElement)("div",{className:"field-group__controls"},(0,r.createElement)(ye.ToggleControl,{label:(0,Ee.__)("Customize Breakpoint","content-control"),checked:i,onChange:o=>n({mediaQueries:{...t.mediaQueries,[e]:{...s,override:o}}})}),i&&(0,r.createElement)(ye.TextControl,{type:"number",label:(0,Ee.__)("Breakpoint (px)","content-control"),autoComplete:"off",value:u,onChange:o=>n({mediaQueries:{...t.mediaQueries,[e]:{...s,breakpoint:parseInt(o)}}})})))})),(0,r.createElement)("div",{className:"field-group"},(0,r.createElement)("div",{className:"field-group__label"},(0,r.createElement)("h3",null,(0,Ee.__)("Advanced Breakpoints","content-control"),(0,r.createElement)("span",{className:"branding-pro-tag"},(0,Ee.__)("Pro","content-control"))),(0,r.createElement)("p",null,(0,Ee.__)("Custom breakpoints & pure custom media queries","content-control"))),(0,r.createElement)("div",{className:"field-group__controls"},(0,r.createElement)(ye.Tooltip,{text:(0,Ee.__)("Upgrade to pro to use these features","content-control"),position:"bottom left"},(0,r.createElement)("span",{style:{position:"relative",display:"inline-block"}},(0,r.createElement)(ye.ToggleControl,{label:(0,Ee.__)("Enable Advanced Breakpoints","content-control"),checked:!1,onChange:()=>{}}),(0,r.createElement)(ye.Button,{href:"https://contentcontrolplugin.com/pricing/?utm_campaign=pro-features&utm_source=block-controls-tab&utm_medium=plugin-ui&utm_content=advanced-breakpoints-learn-more",variant:"link",onClick:t=>{t.preventDefault(),e({tab:"license-and-updates",view:"settings"})},text:(0,Ee.__)("Learn more…","content-control")}))))))},Ut=()=>{const e=(0,be.applyFilters)("contentControl.settingsPage.blockControlSections",[{name:"media-queries",title:(0,Ee.__)("Device & Media Queries","content-control"),icon:we.monitor,comp:At},{name:"block-manager",title:(0,Ee.__)("Block Manager","content-control"),icon:we.blockManager,comp:Ot}]);return(0,r.createElement)(r.Fragment,null,e.map((({name:e,title:t,badge:n,icon:o,comp:a})=>(0,r.createElement)(Dt,{key:e,name:e,badge:n,title:t,icon:o},a?(0,r.createElement)(a,null):t))))};const{rolesAndCaps:Ft}=contentControlSettingsPage,Vt=(()=>{const e=[];return Object.entries(Ft).forEach((([t,{name:n}])=>{void 0===e.find((e=>e.value===t))&&e.push({label:n,value:t})})),Object.values(Ft).forEach((({capabilities:t})=>{Object.keys(t).forEach((t=>{void 0===e.find((({value:e})=>t===e))&&e.push({label:t,value:t})}))})),e})();var jt=()=>{const{settings:e,stageUnsavedChanges:t}=(0,Ce.useSettings)(),n=(0,be.applyFilters)("contentControl.settingsPage.pluginPermissionLabels",[{name:"view_block_controls",label:(0,Ee.__)("View Block Controls","content-control"),default:"edit_posts",description:(0,Ee.__)("Choose who can view block controls in the block editor. These users will see the settings created by others.","content-control")},{name:"edit_block_controls",label:(0,Ee.__)("Edit Block Controls","content-control"),default:"edit_posts",description:(0,Ee.__)("Choose who can edit block controls in the block editor. Users with this role can add or edit controls on blocks.","content-control")},{name:"edit_restrictions",label:(0,Ee.__)("Edit Restriction","content-control"),default:"manage_options",description:(0,Ee.__)("Choose who can manage global restrictions. These users can create, edit, and delete restrictions.","content-control")},{name:"manage_settings",label:(0,Ee.__)("Manage Settings","content-control"),default:"manage_options",description:(0,Ee.__)("Choose who can manage the plugin settings. These users will see the settings page and can change the plugin settings.","content-control")}]),o=(n,o)=>{t({permissions:{...e.permissions,[n]:o}})};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.Notice,{status:"warning",isDismissible:!1},(0,r.createElement)(ye.Icon,{icon:"warning"})," ",(0,Ee.__)("Note: Administrators always have access.","content-control")),n.map((({name:t,label:n,description:a,default:l})=>{const c=e?.permissions?.[t],s=void 0!==Vt.find((({value:e})=>e===c)),i=c&&!s;return(0,r.createElement)("div",{key:t,className:"field-group"},(0,r.createElement)("div",{className:"field-group__label"},(0,r.createElement)("h3",null,n),a&&(0,r.createElement)("p",null,a)),(0,r.createElement)("div",{className:"field-group__controls"},(0,r.createElement)(ye.ToggleControl,{label:(0,Ee.sprintf)(
// translators: %s: default capability
(0,Ee.__)("Override the default (%s)","content-control"),l),checked:!!c,onChange:e=>o(t,!!e&&l)}),c&&(0,r.createElement)(ye.ComboboxControl,{"aria-label":(0,Ee.__)("Choose the role or cap to use","content-control"),value:i?"other":null!=c?c:l,onChange:e=>o(t,"other"===e?"custom_cap":null!=e?e:l),options:[...Vt,{label:(0,Ee.__)("Other (custom)","content-control"),value:"other"}]}),i&&(0,r.createElement)(ye.TextControl,{label:(0,Ee.__)("Enter custom role or cap here","content-control"),help:(0,Ee.__)("Be certain you know what you are doing, this can prevent you from accessing the given feature.","content-control"),value:c,onChange:e=>o(t,e)})))})))};const{logUrl:zt=!1}=contentControlSettingsPage;var It=()=>{const[e,t]=(0,_e.useState)("");return(0,_e.useEffect)((()=>{!1!==zt&&zt.length&&fetch(zt).then((e=>e.text())).then((e=>t(e))).catch((e=>console.error(e)))}),[]),(0,r.createElement)(ye.TextareaControl,{label:"Log Contents",value:e,onChange:e=>t(e)})},Ht=()=>{const{settings:e,stageUnsavedChanges:t}=(0,Ce.useSettings)(),{defaultDenialMessage:n,excludeAdmins:o}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.TextareaControl,{label:(0,Ee.__)("Default Denial Message","content-control"),help:(0,Ee.__)("This message will be shown to users when they do not have access to content.","content-control"),value:n,onChange:e=>t({defaultDenialMessage:e})}),(0,r.createElement)(ye.CheckboxControl,{label:(0,Ee.__)("Exclude administrators from being restricted.","content-control"),help:(0,Ee.__)("Administrators will not be restricted by any restrictions.","content-control"),checked:o,onChange:e=>t({excludeAdmins:e})}))};const{logUrl:$t=!1}=contentControlSettingsPage;(0,be.addFilter)("contentControl.settingsPage.generalSections","content-control/general-settings/restriction-options",(e=>[...e,{name:"restrictions",title:(0,Ee.__)("Restriction Settings","content-control"),icon:we.permissions,comp:Ht}]),5),(0,be.addFilter)("contentControl.settingsPage.generalSections","content-control/general-settings/permissions-options",(e=>[...e,{name:"permissions",title:(0,Ee.__)("Plugin Permissions","content-control"),icon:we.permissions,comp:jt}]),10),(0,be.addFilter)("contentControl.settingsPage.generalSections","content-control/general-settings/log-viewer",(e=>[...e,!1!==$t&&{name:"log",title:(0,Ee.__)("Log Viewer","content-control"),icon:"editor-code",comp:It}]),50);var Gt=()=>{const e=(0,be.applyFilters)("contentControl.settingsPage.generalSections",[]);return(0,r.createElement)(r.Fragment,null,e.map((({name:e,title:t,badge:n,icon:o,comp:a})=>(0,r.createElement)(Dt,{key:e,name:e,badge:n,title:t,icon:o},a?(0,r.createElement)(a,null):t))))},Wt=(0,r.createElement)(ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(ke.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}));const Qt=[{text:(0,Ee.__)("WooCommerce Integration - Create membership sites, drip content, and more","content-control")},{text:(0,Ee.__)("Customize Login URLs - Point users to custom login and registration pages.","content-control")},{text:(0,Ee.__)("Advanced Block Rules:","content-control"),items:[(0,Ee.__)("Scheduling - Schedule blocks on specific dates & times.","content-control"),(0,Ee.__)("Boolean Logic (AND, OR, NOT) - Create complex rules.","content-control"),(0,Ee.__)("Presets - Create and save rule presets for easy reuse","content-control"),(0,Ee.__)("Custom Breakpoints & Media Queries - Control responsive blocks.","content-control")]}];var qt=()=>(0,r.createElement)("div",{className:"upgrade-features"},(0,r.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,Ee.sprintf)(
// translators: %s: Upgrade link.
(0,Ee.__)('To unlock the following features, <a href="%s" target="_blank">upgrade to Pro</a> and enter your license key below.',"content-control"),"https://contentcontrolplugin.com/pricing/?utm_campaign=upgrade-to-pro&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=license-tab-upgrade-text")}}),(0,r.createElement)("ul",{className:"upgrade-notice__feature-list"},Qt.map((({text:e,items:t})=>(0,r.createElement)("li",{key:e},(0,r.createElement)(ye.Icon,{icon:Wt,size:28}),(0,r.createElement)("strong",null,e),t&&(0,r.createElement)("ul",null,t.map((e=>(0,r.createElement)("li",{key:e},(0,r.createElement)(ye.Icon,{icon:Wt,size:28}),(0,r.createElement)("span",null,e)))))))))),Yt=()=>{const{connectInfo:e,licenseKey:t,licenseStatus:n,isSaving:o,activateLicense:a,deactivateLicense:l,checkLicenseStatus:c,removeLicense:s,getLicenseStatusName:i,isLicenseKeyValid:u,isLicenseActive:d,isLicenseDeactivated:m,isLicenseMissing:p,isLicenseExpired:g,isLicenseOverQuota:h,isLicenseDisabled:_,hasError:v}=(0,Ce.useLicense)(),{expires:f,error_message:E}=n,[b,w]=(0,_e.useState)(t),[y,C]=(0,_e.useState)(!1),S=(0,_e.useRef)(null),[k,x]=(0,_e.useState)(!1),N=b!==t;return(0,_e.useEffect)((()=>{if(void 0===e)return S.current?.close(),void(S.current=null);x(!0),S.current=window.open(e.url,"content-control-license-connect","width=580,height=600");const t=setInterval((()=>{S.current?.closed&&(clearInterval(t),c(),x(!1),setTimeout((()=>{window.location.reload()}),1e3))}),1e3)}),[e,c]),(0,_e.useEffect)((()=>{N&&w(t)}),[t,N]),(0,_e.useEffect)((()=>{y&&!o&&C(!1)}),[o,y]),(0,r.createElement)(r.Fragment,null,k&&(0,r.createElement)(ye.Popover,{className:"content-control-license-connect-notice",position:"middle center"},(0,r.createElement)("p",null,(0,Ee.__)("Please wait while we connect to the license store…","content-control"))),(0,r.createElement)("div",{className:"content-control__upgrade-notice"},(0,r.createElement)("h3",{className:"upgrade-notice__title"},(0,Ee.__)("Enter your Content Control License Key","content-control")),(0,r.createElement)("p",{className:"upgrade-notice__description",dangerouslySetInnerHTML:{__html:d?(0,Ee.__)("You are currently using Content Control Pro. Thanks for supporting us! <span>😄</span>","content-control"):(0,Ee.__)("You are currently using Content Control Lite — no license key required. Enjoy! <span>😄</span>","content-control")}}),!u&&(0,r.createElement)(qt,null),(0,r.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,Ee.sprintf)(
// translators: 1: opening strong tag, 2: closing strong tag.
(0,Ee.__)("Enter your license key below to activate %1$sContent Control Pro%2$s!","content-control"),"<strong>","</strong>")}}),(0,r.createElement)("div",{className:fe()(["content-control-license-controls","content-control-license-controls--"+i])},(0,r.createElement)(ye.TextControl,{label:(0,Ee.__)("Enter your license key.","content-control"),hideLabelFromVision:!0,placeholder:(0,Ee.__)("Paste or enter your license key here.","content-control"),value:u?b.replace(/^(.{3})(.*)(.{5})$/,((e,t,n,o)=>t+n.replace(/./g,"*")+o)):b,maxLength:32,width:500,onChange:w,readOnly:y||u,tabIndex:y||u?-1:0,onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text");o||(C(!0),a(t),w(t))}}),(0,r.createElement)(ye.ButtonGroup,null,(0,r.createElement)(ye.Button,{className:"activate-license",variant:"primary",onClick:()=>{C(!0),a(p?b:void 0)},disabled:(o||!N)&&!m,title:(0,Ee.__)("Activate","content-control")},y?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",null,(0,Ee.__)("Activating…","content-control")),(0,r.createElement)(ye.Spinner,null)):(0,r.createElement)("span",null,(0,Ee.__)("Activate","content-control"))),(0,r.createElement)(ye.Button,{className:"deactivate-license",variant:"tertiary",onClick:()=>l(),disabled:o||!d,title:(0,Ee.__)("Deactivate","content-control")},(0,r.createElement)("span",null,(0,Ee.__)("Deactivate","content-control"))),(0,r.createElement)(ye.Button,{className:"remove-license",variant:"tertiary",isDestructive:!0,onClick:()=>s(),disabled:o||!u,title:(0,Ee.__)("Delete","content-control")},(0,r.createElement)(ye.Icon,{icon:tt}),(0,r.createElement)("span",null,(0,Ee.__)("Delete","content-control"))))),(0,r.createElement)("div",{className:"content-control-license-status",dangerouslySetInnerHTML:{__html:p?(0,Ee.sprintf)(
// translators: 1: opening a tag, 2: closing a tag.
(0,Ee.__)("Enter your license key to activate. If you do not have a license key, you can %1$spurchase one here%2$s","content-control"),'<a href="https://contentcontrolplugin.com/pricing/?utm_campaign=upgrade-to-pro&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=license-field-upgrade-text" target="_blank">',"</a>"):d?(0,Ee.sprintf)(
// translators: 1: date
(0,Ee.__)("Your license key is active%1$s. Thank you for supporting Content Control!","content-control"),"lifetime"!==f?" until "+new Date(f).toLocaleDateString():" and never expires"):g?(0,Ee.sprintf)(
// translators: 1: date, 2: opening a tag, 3: closing a tag.
(0,Ee.__)("Your license key has expired on %1$s. Please %2$srenew your license$3$s to continue receiving updates and support.","content-control"),new Date(f).toLocaleDateString(),'<a href="https://contentcontrolplugin.com/checkout/?edd_license_key='+t+'&utm_campaign=renew-license&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=license-tab-renew-link" target="_blank">',"</a>"):h?(0,Ee.sprintf)(
// translators: 1: opening a tag, 2: closing a tag, 3: opening a tag, 4: closing a tag.
(0,Ee.__)("Your license key has reached its site limit. %1$sUpgrade your license%2$s to add more sites, or %3$slog in%4$s to manage current activations.","content-control"),'<a href="https://contentcontrolplugin.com/checkout/?edd_license_key='+t+'&utm_campaign=upgrade-to-pro&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=license-tab-upgrade-link" target="_blank">',"</a>",'<a href="https://contentcontrolplugin.com/your-account/?utm_campaign=manage-activations&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=license-tab-login-link" target="_blank">',"</a>"):m?(0,Ee.__)("Your license key is currently deactivated. Click the button above to activate now.","content-control"):_?(0,Ee.__)("Your license key has been disabled. Please contact support.","content-control"):v?(0,Ee.sprintf)(
// translators: 1: error message.
(0,Ee.__)("Your license key failed to activate with the following error: %1$s","content-control"),E):(0,Ee.__)("There was an error with your license key. Please check your key and try again.","content-control")}})))};(0,be.addFilter)("contentControl.settingsPage.upgradeSections","content-control/general-settings/license-options",(e=>{const{isLicenseActive:t}=(0,Ce.useLicense)();return[...e,{name:"license",title:(0,Ee.__)("Pro Licensing","content-control"),badge:(0,r.createElement)(r.Fragment,null,t&&(0,r.createElement)("span",{className:"license-status-bubble"},(0,Ee.__)("Activated","content-control"))),icon:we.licenseKey,comp:Yt}]}),5);var Kt=()=>{const e=(0,be.applyFilters)("contentControl.settingsPage.upgradeSections",[]);return(0,r.createElement)(r.Fragment,null,e.map((({name:e,title:t,badge:n,icon:o,comp:a})=>(0,r.createElement)(Dt,{key:e,name:e,badge:n,title:t,icon:o},a?(0,r.createElement)(a,null):t))))};const{permissions:{manage_settings:Jt}}=contentControlSettingsPage;var Zt=()=>{var e;const[{tab:t="general"}]=ue({tab:j,view:j}),n=(0,be.applyFilters)("contentControl.settingsPage.tabs",[{name:"general",title:(0,Ee.__)("General","content-control"),comp:Gt},{name:"block-controls",title:(0,Ee.__)("Block Controls","content-control"),comp:Ut},{name:"license-and-updates",title:(0,Ee.__)("Licensing","content-control"),comp:Kt}]),{title:o,comp:a}=null!==(e=n.find((e=>e.name===t)))&&void 0!==e?e:{};return Jt?(0,r.createElement)("div",{className:fe()(["cc-settings-view",`tab-${t}`])},(0,r.createElement)("div",{className:"plugin-settings"},(0,r.createElement)(Tt,{type:"settings"}),(0,r.createElement)(Bt,{tabs:n}),(0,r.createElement)("div",{className:"cc-settings-view__content"},a?(0,r.createElement)(a,null):o))):(0,r.createElement)("div",{className:"cc-settings-view permission-denied"},(0,r.createElement)("h3",null,(0,Ee.__)("Permission Denied","content-control")),(0,r.createElement)("p",null,(0,r.createElement)("strong",null,(0,Ee.__)("You do not have permission to access this page.","content-control"))))};const Xt={total:1,progress:0,currentTask:void 0,error:void 0},{hasUpgrades:en,upgradeNonce:tn,upgradeUrl:nn}=contentControlSettingsPage;var on=()=>{const e=(0,_e.useRef)(null),[t,n]=(0,_e.useState)({running:!1,done:!1,logs:[],showLogs:!1,status:Xt}),[o,a]=(0,_e.useState)(-1),{running:l,done:c,logs:s,showLogs:i,status:u}=t,[d]=function(e,t,n=EventSource){const o=(0,r.useRef)(null),[a,l]=(0,r.useState)("init");return(0,r.useEffect)((()=>{if(e){const r=new n(e,{withCredentials:t});return o.current=r,r.addEventListener("open",(()=>l("open"))),r.addEventListener("error",(()=>l("error"))),()=>{o.current=null,r.close()}}l("closed")}),[e,t,n]),[o.current,a]}(l?`${nn}&nonce=${tn}`:"",!0);!function(e,t,n,o=[]){(0,r.useEffect)((()=>{if(e)return t.forEach((t=>e.addEventListener(t,n))),()=>t.forEach((t=>e.removeEventListener(t,n)))}),[e,...o])}(d,["upgrades:start","upgrades:progress","upgrades:complete","upgrades:error","task:start","task:progress","task:complete","task:retry","task:error"],(({type:e,data:o})=>{const r=JSON.parse(o),{message:l="",status:c}=r,i={...t,status:c,logs:l.length?[...s,l]:s};switch(e){case"upgrades:start":case"upgrades:progress":case"upgrades:complete":case"task:retry":case"task:start":case"task:complete":case"task:progress":"upgrades:complete"===e&&(i.done=!0,a(15),d?.close()),n(i);break;case"upgrades:error":case"task:error":case"error":console.log("Error:",l,r),"upgrades:error"===e&&(i.done=!0,d?.close(),i.status={...i.status,error:l}),n({...i,logs:[...s,`ERROR: ${l}`,JSON.stringify(r)]});break;default:console.log("Unknown event:",e)}}),[t]);const{total:m,progress:p,currentTask:g}=u,{progress:h=NaN,total:_=NaN}=g||{};(0,_e.useEffect)((()=>{l&&c&&o>=0&&(e.current=setTimeout((()=>{0===o?window.location.reload():a(o-1)}),1e3))}),[c,o,l]);const v=p+1,f=m-p-1,E=(0,Ve.clamp)(p/m*100,0,100),b=(0,Ve.clamp)(v/m*100,0,100),w=h/_,y=E,C=(0,_e.useMemo)((()=>100-y-f/m*100),[y,f,m]),S=(0,_e.useMemo)((()=>u.currentTask?w*C:0),[w,C,u.currentTask]);return en?(0,r.createElement)("div",{className:"content-control-upgrades-panel"},l?(0,r.createElement)("div",{className:fe()(["upgrade-progress",u.error?"upgrade-errors":""])},(0,r.createElement)("div",{className:"upgrade-progress__header"},(0,r.createElement)("h3",{className:"upgrade-progress__title"},(0,Ee.__)("Upgrade Progress","content-control")),(0,r.createElement)("div",{className:"upgrade-progress__task-percentage"},c?(0,r.createElement)(ye.Button,{onClick:()=>{var t;clearTimeout(null!==(t=e.current)&&void 0!==t?t:0),window.location.reload()},variant:"link"},`${(0,Ee.__)("Reload","content-control")} (${o})`):`${Math.round(E)}%`)),(0,r.createElement)("div",{className:"upgrade-progress__bar"},(0,r.createElement)("div",{className:fe()("upgrade-progress__bar__fill","upgrade-progress__bar__fill--next",b>=100?"complete":""),style:{width:`${b}%`}}),(0,r.createElement)("div",{className:fe()("upgrade-progress__bar__fill","upgrade-progress__bar__fill--current",E>=100?"complete":""),style:{width:`${E}%`}}),(0,r.createElement)("div",{className:fe()("upgrade-progress__bar__fill","upgrade-progress__bar__fill--task",w>=1?"complete":""),style:{left:`${y}%`,width:`${(0,Ve.clamp)(S,0,100)}%`}},(0,r.createElement)("div",{className:"task-progress"},w>0?Math.round(100*w):0,"%"))),(0,r.createElement)("div",{className:"upgrade-progress__logs__header"},(0,r.createElement)("div",{className:"upgrade-progress__logs__header__status"},s[s.length-1]),(0,r.createElement)(ye.Button,{variant:"link",onClick:()=>{n({...t,showLogs:!i})}},i?(0,Ee.__)("Hide Logs","content-control"):(0,Ee.__)("Show Logs","content-control"))),i&&(0,r.createElement)("div",{className:"upgrade-progress__logs"},(0,r.createElement)("div",{className:"upgrade-progress__logs__content"},s.map(((e,t)=>(0,r.createElement)("div",{key:t},e)))))):(0,r.createElement)("div",{className:"upgrade-notice"},(0,r.createElement)("div",{className:"notice-icon"},(0,r.createElement)("img",{alt:(0,Ee.__)("Content Control requires an upgrade to the database.","content-control"),src:`${contentControlSettingsPage.pluginUrl}assets/images/illustration-check.svg`})),(0,r.createElement)("div",{className:"notice-content"},(0,r.createElement)("h2",null,(0,Ee.__)("Content Control requires an upgrade to the database.","content-control")),(0,r.createElement)("p",null,(0,Ee.__)("Click the button below to start the upgrade process.","content-control"))),(0,r.createElement)(ye.Button,{variant:"secondary",onClick:()=>{n({...t,running:!0})}},(0,Ee.__)("Start Upgrades","content-control")))):null};const{permissions:{manage_settings:rn,edit_restrictions:an}}=contentControlSettingsPage;var ln=()=>{const{isLicenseActive:e}=(0,Ce.useLicense)(),[{view:t="restrictions"},n]=ue({tab:j,view:j}),o=(0,_e.useMemo)((()=>{let t=[];return an&&t.push({name:"restrictions",title:(0,Ee.__)("Restrictions","content-control"),className:"restrictions",pageTitle:(0,Ee.__)("Content Control - Global Restrictions","content-control"),heading:(0,Ee.__)("Content Control - Global Restrictions","content-control"),comp:Mt}),rn&&t.push({name:"settings",title:(0,Ee.__)("Settings","content-control"),className:"settings",pageTitle:(0,Ee.__)("Content Control - Plugin Settings","content-control"),heading:(0,Ee.__)("Plugin Settings","content-control"),comp:Zt}),t=(0,be.applyFilters)("contentControl.adminViews",[...t,{name:"upgrade",className:"upgrade",title:(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ye.Icon,{size:20,icon:we.upgrade}),e?(0,Ee.__)("License Status","content-control"):(0,Ee.__)("Upgrade to Pro","content-control")," "),pageTitle:(0,Ee.__)("Content Control - Upgrade to Pro","content-control"),heading:(0,Ee.__)("Content Control - Upgrade to Pro","content-control"),href:"https://contentcontrolplugin.com/pricing/?utm_campaign=upgrade-to-pro&utm_source=plugin-settings-page&utm_medium=plugin-ui&utm_content=main-menu-upgrade-button",target:"_blank",onClick:()=>(n({view:"settings",tab:"license-and-updates"}),!1)}]),t}),[e,n]),a=o.find((e=>e.name===t)),l=a?.comp?a.comp:()=>(0,r.createElement)(r.Fragment,null);return(0,_e.useEffect)((()=>{var e;document.title=null!==(e=o.find((e=>e.name===t))?.pageTitle)&&void 0!==e?e:(0,Ee.__)("Content Control","content-control")}),[t,o]),(0,r.createElement)(ye.SlotFillProvider,null,(0,r.createElement)("div",{className:fe()(["cc-settings-page",`view-${t}`])},(0,r.createElement)(on,null),(0,r.createElement)(Be,{tabs:o}),(0,r.createElement)("div",{className:"cc-settings-page__content"},(0,r.createElement)(l,null)),(0,r.createElement)(ye.Popover.Slot,null)))};const{wpVersion:cn}=contentControlSettingsPage,sn=()=>(0,r.createElement)(U,null,(0,r.createElement)(ae,{adapter:pe},(0,r.createElement)(he.RegistryProvider,{value:ge.registry},(0,r.createElement)(ln,null)))),un=()=>{const e=document.getElementById("content-control-root-container");e&&(cn>=6.2||"function"==typeof _e.createRoot?(0,_e.createRoot)(e).render(sn()):(0,_e.render)(sn(),e))}}(),(window.contentControl=window.contentControl||{}).settingsPage=o}();