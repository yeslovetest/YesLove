window.tribe=window.tribe||{},tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},tribe.events.virtualAdminZoom=tribe.events.virtualAdminZoom||{},function(e,t,n,o){var i=e(document);e(window);t.selectors={configureZoom:".tribe-events-virtual-meetings-zoom-details__generate-zoom-button",displayLinkOption:"#tribe-events-virtual-meetings-zoom-display-details",embedVideoOption:"#tribe-events-virtual-embed-video",hidden:".tribe-events-virtual-hidden",linkedButtonOption:"#tribe-events-virtual-linked-button",accountSelect:".tribe-events-virtual-meetings-zoom-details__account-select-link",meetingCreate:".tribe-events-virtual-meetings-zoom-details__create-link",meetingDetails:".tribe-events-virtual-meetings-zoom-details",meetingDetailsFloat:".tribe-events-virtual-meetings-zoom-details--float",meetingRemove:".tribe-events-virtual-meetings-zoom-details__remove-link",remove:".tribe-remove-virtual-event",setupZoomCheckbox:"#tribe-events-virtual-zoom-link-generate",urlField:".tribe-events-virtual-video-source__virtual-url-input",virtualContainer:"#tribe-virtual-events",zoomMeetingsContainer:"#tribe-events-virtual-meetings-zoom",zoomType:'input[name="tribe-events-virtual[zoom-meeting-type]"]:checked'},t.originalState={linkedButtonOption:{checked:e(t.selectors.linkedButtonOption).prop("checked")}},t.state={urlField:{value:""}},t.handleAccountSelection=function(n){n.preventDefault();var o=e(n.target).attr("href"),i=e("#tribe-events-virtual-zoom-account option:selected").val();e.ajax(o,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_account_id:i},success:t.onMeetingHandlingSuccess})},t.handleMeetingRequest=function(n){n.preventDefault();var o=e(t.selectors.zoomType).val(),i=e("#tribe-events-virtual-zoom-host option:selected").val(),s=e(t.selectors.zoomMeetingsContainer).data("accountId");e.ajax(o,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_host_id:i,zoom_account_id:s},success:t.onMeetingHandlingSuccess})},t.handleRemoveRequest=function(n){if(n.preventDefault(),confirm(tribe_events_virtual_placeholder_strings.removeConfirm)){var o=e(n.target).attr("href");o&&t.removeRequestAjax(o)}},t.removeRequestAjax=function(n){e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),success:t.onMeetingHandlingSuccess})},t.onMeetingHandlingSuccess=function(o){e(t.selectors.zoomMeetingsContainer).replaceWith(o),t.setupControls(),t.checkButtons(),n.handleVideoSourceClasses(),t.initTribeDropdowns(),e(n.selectors.videoSource).trigger("verify.dependency"),n.handleShowOptionInteractivity&&"function"==typeof n.handleShowOptionInteractivity&&n.handleShowOptionInteractivity()},t.waitForVirtualEventsToLoad=function(){var o=10,i=setInterval(function(){o--,(e(t.selectors.meetingDetails).length||0===o)&&(n.handleVideoSourceClasses(),clearInterval(i))},200)},t.handleLinkedMetaRemove=function(){var n=e(t.selectors.meetingRemove).attr("href");n&&t.removeRequestAjax(n)},t.bindEvents=function(){e(t.selectors.virtualContainer).on("verify.dependency",t.waitForVirtualEventsToLoad).on("click",t.selectors.configureZoom,t.setZoomCheckboxCheckedAttr(!0)).on("click",t.selectors.accountSelect,t.handleAccountSelection).on("click",t.selectors.meetingCreate,t.handleMeetingRequest).on("click",t.selectors.meetingRemove,t.handleRemoveRequest),i.on("virtual.delete",t.handleLinkedMetaRemove)},t.checkButtons=function(){var n=e(t.selectors.displayLinkOption);e(t.selectors.linkedButtonOption).prop("checked",!0),n.prop("checked",!0)},t.setupControls=function(){var n=e(t.selectors.urlField),o=e(t.selectors.embedVideoOption).closest("li"),i=e(t.selectors.displayLinkOption).closest("li"),s=e(t.selectors.linkedButtonOption);e(t.selectors.meetingDetails).length?(n.prop({disabled:!0}).attr("placeholder",tribe_events_virtual_placeholder_strings.zoom),o.addClass(t.selectors.hidden.className()),i.removeClass(t.selectors.hidden.className()),t.state.urlField.value=n.val(),n.val("")):(n.prop({disabled:!1}).attr("placeholder",tribe_events_virtual_placeholder_strings.video),o.removeClass(t.selectors.hidden.className()),i.addClass(t.selectors.hidden.className()),s.prop("checked",t.originalState.linkedButtonOption.checked),n.val(t.state.urlField.value),t.state.urlField.value="")},t.initTribeDropdowns=function(){e(document).find(t.selectors.zoomMeetingsContainer).find(o.selector.dropdown).not(o.selector.created).tribe_dropdowns()},t.setZoomCheckboxCheckedAttr=function(n){return function(){e(t.selectors.setupZoomCheckbox).prop("checked",n).trigger("verify.dependency")}},t.initMultipleControlsAccordion=function(){if(console.info("Method deprecated with no replacement."),tribe.events.views.accordion){var t=tribe.events.views.accordion,n=e("#tribe-events-virtual-meetings-zoom.tribe-events-virtual-meetings-zoom-controls--multi");t.bindAccordionEvents(n)}},t.handleMeetingDetailsClasses=function(){console.info("Method deprecated and replaced with virtualAdmin.handleVideoSourceClasses.");var n=e(t.selectors.meetingDetails);if(n.length){var o=e(t.selectors.urlField);o.parent().width()>=n.outerWidth(!0)+o.outerWidth(!0)?n.addClass(t.selectors.meetingDetailsFloat.className()):n.removeClass(t.selectors.meetingDetailsFloat.className())}},t.ready=function(){t.bindEvents()},e(t.ready)}(jQuery,tribe.events.virtualAdminZoom,tribe.events.virtualAdmin,tribe_dropdowns);