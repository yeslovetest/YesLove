tribe.events=tribe.events||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},function(e,t){var o=e(document);t.selectors={configure:".tribe-configure-virtual-button",displayOption:".tribe-events-virtual-display",displayOptionCheckbox:'.tribe-events-virtual-display input[type="checkbox"]',embedCheckbox:"#tribe-events-virtual-embed-video",embedNotice:".tribe-events-virtual-video-source__not-embeddable-notice",embedNoticeShow:".tribe-events-virtual-video-source__not-embeddable-notice--show",embedNoticeText:".tribe-events-virtual-video-source__not-embeddable-text",remove:".tribe-remove-virtual-event",setupCheckbox:"#tribe-events-virtual-setup",showOptions:".tribe-events-virtual-show input",showAll:"#tribe-events-virtual-show-to-all",videoSource:"#tribe-events-virtual-video-source",videoSourcesWrap:".tribe-events-virtual-video-sources-wrap",videoSourceDetails:".tribe-events-virtual-video-sources",videoSourcesFloat:".tribe-events-virtual-video-sources--float",virtualContainer:"#tribe-virtual-events",virtualUrl:".tribe-events-virtual-video-source__virtual-url-input"},t.setCheckboxCheckedAttr=function(i){return function(){if(!i){if(!confirm(tribe_events_virtual_strings.deleteConfirm))return;o.trigger("virtual.delete")}e(t.selectors.setupCheckbox).prop("checked",i).trigger("verify.dependency")}},t.testEmbed=function(){if("video"!==e(t.selectors.videoSource).val())return;const o=e(t.selectors.virtualUrl),i=o.val(),r=o.attr("data-nonce");o.attr("data-oembed-test")&&i&&r?e.ajax({type:"post",dataType:"json",url:ajaxurl,data:{action:"tribe_events_virtual_check_oembed",url:i,nonce:r}}).done(function(){t.hideOembedNotice()}).fail(function(e){t.showOembedNotice(e)}):t.hideOembedNotice()},t.hideOembedNotice=function(){e(t.selectors.embedNotice).removeClass(t.selectors.embedNoticeShow.className()),e(t.selectors.embedCheckbox).prop({disabled:!1})},t.showOembedNotice=function(o){e(t.selectors.embedNoticeText).html(o.responseJSON.data),e(t.selectors.embedNotice).addClass(t.selectors.embedNoticeShow.className()),e(t.selectors.embedCheckbox).prop({disabled:!0,checked:!1})},t.handleShowOptionEnablement=function(){var o=e(t.selectors.displayOption).find(":checked:visible").length,i=e(t.selectors.showOptions);o>0?i.prop({disabled:!1}):i.prop({disabled:!0})},t.handleShowOptionInteractivity=function(o){if(o&&o.hasOwnProperty("target")){var i=e(o.target);i.prop("checked")&&"all"!==i.val()&&e(t.selectors.showAll).prop("checked",!1)}},t.bindEvents=function(){e(t.selectors.virtualContainer).on("click",t.selectors.configure,t.setCheckboxCheckedAttr(!0)).on("click",t.selectors.remove,t.setCheckboxCheckedAttr(!1)).on("blur",t.selectors.virtualUrl,t.testEmbed).on("click",t.selectors.displayOptionCheckbox,t.handleShowOptionEnablement).on("change",t.selectors.showOptions,t.handleShowOptionInteractivity)},t.ready=function(){t.bindEvents(),t.testEmbed(),setTimeout(function(){e(t.selectors.videoSource).trigger("verify.dependency")},0)},t.handleVideoSourceClasses=function(){console.info("Method deprecated with no replacement.");var o=e(t.selectors.videoSourceDetails);if(o.length){var i=e(t.selectors.videoSourcesWrap);i.parent().width()>=o.outerWidth(!0)+i.outerWidth(!0)?o.addClass(t.selectors.videoSourcesFloat.className()):o.removeClass(t.selectors.videoSourcesFloat.className())}},e(t.ready)}(jQuery,tribe.events.virtualAdmin);