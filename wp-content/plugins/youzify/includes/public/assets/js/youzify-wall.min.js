var youzify_load_attachments=!1;!function(t){"use strict";t(document).ready(function(){function i(){var i,a,o,e,s,n=document.cookie.split(";"),l={};for(i=0;i<n.length;i++)o=(a=n[i]).indexOf("="),e=t.trim(unescape(a.slice(0,o))),s=unescape(a.slice(o+1)),0===e.indexOf("bp-")&&(l[e]=s);return encodeURIComponent(t.param(l))}if(t.youzify_google_map_init=function(){if("object"==typeof google&&"object"==typeof google.maps){var i,a,o;t(".youzify-activity-map-unloaded").each(function(){i=t(this),a=new google.maps.Map(i[0],{zoom:16,center:new google.maps.LatLng(50,50),panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUI:!1,mapTypeId:google.maps.MapTypeId.ROADMAP}),(o=new google.maps.places.PlacesService(a)).getDetails({placeId:i.attr("data-place_id")},function(t,i){if(i===google.maps.places.PlacesServiceStatus.OK){var o=t.geometry.location;new google.maps.Marker({position:o,map:a}),a.setCenter(o)}}),i.removeClass("youzify-activity-map-unloaded").addClass("youzify-activity-map").fadeIn()})}},t.youzify_google_map_init(),jQuery().viewportChecker&&(t.youzify_init_wall_posts_effect=function(){t(".youzify_effect")[0]&&t(".youzify_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(t,i){t.addClass(t.data("effect"))}},500)},t.youzify_init_wall_posts_effect(),t("#youzify div.activity")[0])&&new MutationObserver(function(i){t.youzify_init_wall_posts_effect(),t.youzify_sliders_init(),t.youzify_google_map_init()}).observe(t("#youzify div.activity")[0],{attributes:!1,childList:!0,subtree:!0,characterData:!1}),t(document).on("click",".youzify-trigger-who-modal",function(i){i.preventDefault();var a=t(this);if(!a.hasClass("loading")){if(a.addClass("loading"),!a.find("i").get(0)){var o=a.text();a.html('<i class="fas fa-spin fa-spinner"></i>')}var e=t(this).closest("li.activity-item"),s={action:t(this).data("action"),post_id:e.attr("id").substr(9,e.attr("id").length)};jQuery.post(Youzify.ajax_url,s,function(i){a.html(o),t.youzify_show_modal(t(i)),a.removeClass("loading")})}}),t(document).on("click",".youzify-delete-post",function(a){var o=t(this),e=o.parents("div.activity ul li"),s=e.prop("class").match(/date-recorded-([0-9]+)/);o.addClass("loading"),t.post(ajaxurl,{action:"delete_activity",cookie:i(),id:t(this).parent().attr("data-activity-id"),_wpnonce:o.attr("data-nonce")},function(t){t[0]+t[1]==="-1"?(e.prepend(t.substr(2,t.length)),e.children("#message").hide().fadeIn(300)):(e.slideUp(300),s&&activity_last_recorded===s[1]&&(newest_activities="",activity_last_recorded=0))})}),t(document).on("click",".youzify-show-tagged-users",function(i){i.preventDefault(),t(".youzify-wall-modal-overlay").fadeIn(500,function(){t(this).find(".youzify-modal-loader").fadeIn(400)});var a=t(this).closest("li.activity-item"),o={action:"youzify_activity_tagged_users_modal",post_id:a.attr("id").substr(9,a.attr("id").length)};jQuery.post(Youzify.ajax_url,o,function(i){t("body").append(i).find(".youzify-wall-modal").addClass("youzify-wall-modal-show"),t(".youzify-wall-modal-overlay").find(".youzify-modal-loader").hide()})}),t(document).keyup(function(i){t(".youzify-wall-modal-show")[0]&&27===i.keyCode&&t(".youzify-wall-modal-close").trigger("click")}),t(document).mouseup(function(i){t(".youzify-wall-modal-overlay").is(i.target)&&t(".youzify-wall-modal-show")[0]&&t(".youzify-wall-modal-close").trigger("click")}),"on"==Youzify.activity_autoloader){var a=t(window);a.scroll(function(){var i=t("#activity-stream .load-more:visible");if(!(!i.get(0)||i.data("youzify-autoloaded"))){var o=i.offset().top-3e3;a.scrollTop()+a.height()>o&&(i.data("youzify-autoloaded",1),i.find("a").trigger("click"))}})}t("#activity-stream").on("click",".friendship-button a",function(){t(this).parent().addClass("loading");var a=t(this).attr("id"),o=t(this).attr("href"),e=t(this);return a=(a=a.split("-"))[1],o=(o=(o=o.split("?_wpnonce="))[1].split("&"))[0],t.post(ajaxurl,{action:"addremove_friend",cookie:i(),fid:a,_wpnonce:o},function(i){var a=e.attr("rel"),o=e.parent();"add"===a?t(o).fadeOut(200,function(){o.removeClass("add_friend"),o.removeClass("loading"),o.addClass("pending_friend"),o.fadeIn(200).html(i)}):"remove"===a&&t(o).fadeOut(200,function(){o.removeClass("remove_friend"),o.removeClass("loading"),o.addClass("add"),o.fadeIn(200).html(i)})}),!1}),t("#activity-stream").on("click",".group-button a",function(a){t(this).hasClass("membership-requested")||t(this).addClass("youzify-btn-loading");var o=t(this).parent().attr("id"),e=t(this).attr("href"),s=t(this);return o=(o=o.split("-"))[1],e=(e=(e=e.split("?_wpnonce="))[1].split("&"))[0],(!s.hasClass("leave-group")||!1!==confirm(BP_DTheme.leave_group_confirm))&&(t.post(ajaxurl,{action:"joinleave_group",cookie:i(),gid:o,_wpnonce:e},function(i){var a=s.parent();t(a).fadeOut(200,function(){a.fadeIn(200).html(i);var o=t("#groups-personal span"),e=1;s.hasClass("leave-group")?(a.hasClass("hidden")&&a.closest("li").slideUp(200),e=0):s.hasClass("request-membership")&&(e=!1),o.length&&!1!==e&&(e?o.text((o.text()>>0)+1):o.text((o.text()>>0)-1))})}),!1)}),t("audio,video").on("play",function(){t("audio,video").not(this).each(function(t,i){i.pause()}),t("iframe").each(function(i,a){t(a).attr("src",t(a).attr("src"))})}),t(document).on("click",".nice-select .option",function(i){t(this).parent().prev(".current").attr("data-value",t(this).attr("data-value"))}),t(".activity-list").on("click","li.load-more",function(i){if(t(this).closest(".youzify-activity-shortcode")[0]){i.stopImmediatePropagation();var a=t(this);a.addClass("loading");var o=t(this).parents(".youzify-activity-shortcode");o.attr("data-page",parseInt(o.attr("data-page"))+1);var e=o.data();return e.page=o.attr("data-page"),t.post(ajaxurl,{data:e,action:"youzify_activity_load_activities"},function(i){if(i.success){a.hide();var o=t(i.data);a.parents("ul.activity-list").append(o),bp_legacy_theme_hide_comments(o)}},"json"),!1}}),t(document).on("click",".activity-item .youzify-show-item-tools",function(i){var a=t(this),o=a.closest("li.activity-item"),e=a.find("i").attr("class");if(a.hasClass("loaded")){o.find(".youzify-activity-tools").fadeToggle();return}!a.hasClass("loading")&&(a.addClass("loading"),a.find("i").attr("class","fas fa-spin fa-spinner"),t.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{activity_id:o.attr("id").substr(9,o.attr("id").length),action:"youzify_get_activity_tools"},success:function(i){a.find("i").attr("class",e),a.addClass("loaded"),a.removeClass("loading"),i.success&&t(i.data).prependTo(o).fadeIn(),t(i.data).find(".youzify-pin-tool").get(0)&&t("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-sticky-posts.min.js"}).appendTo("head"),t(i.data).find(".youzify-bookmark-tool").get(0)&&t("<script/>",{rel:"text/javascript",src:Youzify.assets+"js/youzify-bookmark-posts.min.js"}).appendTo("head")}}))}),t(".youzify-activity-show-search-form").on("click",function(i){i.preventDefault();var a=t(this);a.closest("ul").find("#activity-filter-select .youzify-dropdown-area").fadeOut(1,function(){a.closest("li").find(".youzify-dropdown-area").fadeToggle(),a.closest("li").find("input").focus()})}),t(".youzify-activity-show-filter").on("click",function(i){i.preventDefault();var a=t(this);a.closest("ul").find(".youzify-activity-show-search .youzify-dropdown-area").fadeOut(1,function(){a.closest("li").find(".youzify-dropdown-area").fadeToggle()})}),t(".youzify-show-activity-search").on("click",function(i){i.preventDefault();var a=t(this).parents("#youzify"),o=a.find(".youzify-activity-show-search .youzify-dropdown-area");a.find("#activity-filter-select .youzify-dropdown-area, .activity-type-tabs").fadeOut(),o.fadeToggle(),o.find("input").focus()}),t(".youzify-show-activity-filter").on("click",function(i){i.preventDefault();var a=t(this).parents("#youzify");a.find(".youzify-activity-show-search .youzify-dropdown-area, .activity-type-tabs").fadeOut(),a.find("#activity-filter-select .youzify-dropdown-area").fadeToggle()}),t(".youzify-show-activity-menu").on("click",function(i){i.preventDefault();var a=t(this).parents("#youzify");a.find("#subnav .youzify-dropdown-area").fadeOut(),a.find(".activity-type-tabs").fadeToggle()}),t(".activity_share").on("click",".activity-read-more a",function(i){var a=t(this);return a.addClass("loading"),t.post(ajaxurl,{action:"get_single_activity_content",activity_id:a.parent().attr("id").split("-")[3]},function(t){a.closest(".activity-inner").slideUp(300).html(t).slideDown(300)}),!1}),t(document).on("click",".youzify-wall-modal-close",function(i){i.preventDefault(),t(".youzify-wall-modal").removeClass("youzify-wall-modal-show"),t(".youzify-wall-modal-overlay").fadeOut(600),setTimeout(function(){t(".youzify-wall-modal").remove()},500)}),t(document).on("click",".youzify-see-poll-results",function(){var i=t(this).closest(".youzify-poll-content");t(this).find("i").attr("class","fas fa-spinner fa-spin"),t.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_result_content",activity_id:i.attr("data-activity-id")},success:function(a){i.find(".youzify-poll-holder").html(t(a.data))}})}),t(document).on("click",".youzify-see-poll-options",function(){var i=t(this).closest(".youzify-poll-content");t(this).find("i").attr("class","fas fa-spinner fa-spin"),t.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_revote_content",activity_id:i.attr("data-activity-id")},success:function(a){i.find(".youzify-poll-holder").html(t(a.data).find(".youzify-poll-options-holder"))}})}),t(document).on("click",".youzify-submit-vote",function(){var i=t(this),a=t(this).closest(".youzify-poll-content");if(!i.hasClass("yz-loading")){if(t(this).hasClass("youzify-disable-vote")){t.youzify_DialogMsg("error",Youzify.poll_option_empty);return}var o=[];a.find('input[name="youzify_poll_option[]"]:checked').each(function(i){o[i]=t(this).val()});var e=t(this).html();t.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_poll_new_vote",voting_options:o,activity_id:a.attr("data-activity-id")},beforeSend:function(){i.addClass("yz-loading"),i.html('<i class="fas fa-spin fa-spinner"></i>')},success:function(o){if(i.removeClass("yz-loading"),i.html(e),!o.success){t.youzify_DialogMsg("error",o.data);return}"off"==i.attr("data-revote")&&(a.find(".youzify-poll-item-input").prop("disabled",!0),i.remove()),o.data.result?t.youzify_DialogMsg("success",o.data.msg):a.find(".youzify-poll-holder").html(t(o.data))}})}}),t(document).on("click",".youzify-poll-item-input",function(){var i=t(this).closest(".youzify-poll-options-holder");i.find(".youzify-poll-item-input:checked").length>0?i.find(".youzify-disable-vote").removeClass("youzify-disable-vote"):0==i.find(".youzify-poll-item-input:checked").length&&i.find(".youzify-submit-vote").addClass("youzify-disable-vote")}),t(document).on("click",".youzify-show-voters",function(){var i=t(this).closest(".youzify-poll-content"),a=t(this),o=a.html();a.html('<i class="fas fa-spinner fa-spin"></i>'),t.ajax({url:ajaxurl,type:"POST",data:{action:"youzify_activity_all_voters",activity_id:i.attr("data-activity-id"),option_id:t(this).attr("data-option-id")},success:function(e){a.html(o),i.find(".youzify-poll-holder").append(t(e.data))}})})})}(jQuery);