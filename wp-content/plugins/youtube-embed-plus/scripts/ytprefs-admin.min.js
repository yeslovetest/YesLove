'use strict';(function(b,a){b._EPYTA_.widen_ytprefs_wiz=b._EPYTA_.widen_ytprefs_wiz||function(){setTimeout(function(){var f=Math.min(950,a(b).width()-100),c=-1*f/2;a("#TB_window").addClass("epyt-thickbox").animate({marginLeft:c,width:f},150,"swing",function(){a("#TB_window").get(0).style.setProperty("width",f,"important")});a("#TB_overlay").addClass("epyt-thickbox");a("#TB_window iframe").animate({width:f},150)},750)};b._EPYTA_.ytvi_cancel=b._EPYTA_.ytvi_cancel||function(){a(".ytvi-step").hide("fade",
{},500,function(){a(".ytvi-step-1").show("fade",{},500)})};b._EPYTA_.moneyFormat=b._EPYTA_.moneyFormat||function(f){return"$"+parseFloat(f).toFixed(2)};b._EPYTA_.escId=function(f){return"#"+f.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")};b._EPYTA_.demoBackgroundColor=function(f,c){setTimeout(function(){a(".vi-story-demo--info").css("background-color",a(b._EPYTA_.escId("vi_js_settings[backgroundColor]")).val())},0)};b._EPYTA_.demoTextColor=function(f,c){setTimeout(function(){a(".vi-story-demo--info *").css("color",
a(b._EPYTA_.escId("vi_js_settings[textColor]")).val())},0)};b._EPYTA_.demoFontFamily=function(){a(".vi-story-demo--title").css("font-family",a(b._EPYTA_.escId("vi_js_settings[font]")).val())};b._EPYTA_.demoFontSize=function(){a(".vi-story-demo--title").css("font-size",a(b._EPYTA_.escId("vi_js_settings[fontSize]")).val()+"px")};b._EPYTA_.onboardNext=function(f){a(".ytprefs-ob-step").removeClass("active-step");setTimeout(function(){b.scrollTo(0,0);f.next().addClass("active-step")},600)};b._EPYTA_.onboardPrev=
function(f){a(".ytprefs-ob-step").removeClass("active-step");setTimeout(function(){b.scrollTo(0,0);f.prev().addClass("active-step")},600)};b._EPYTA_.selectText=function(f){if(document.selection){var c=document.body.createTextRange();c.moveToElementText(f);c.select()}else if(b.getSelection){var d=b.getSelection();c=document.createRange();c.selectNode(f);d.removeAllRanges();d.addRange(c)}};b._EPYTA_.adstxtLookup=function(){b._EPYTA_.adstxtLoading(!0);a.ajax({url:location.protocol+"//"+location.hostname+
"/ads.txt?c="+Date.now(),dataType:"text",type:"get",data:"",headers:{"Cache-Control":"no-cache"},async:!0}).always(function(f,c,d){if("success"===c)switch(d.status){case 200:case 301:case 302:case 304:case 307:b._EPYTA_.adstxtVerify(f);break;default:b._EPYTA_.adstxtVerify("")}else 404==f.status?a.ajax({url:location.protocol+"//"+location.hostname+"/ads.txt",dataType:"text",type:"get",data:"",headers:{"Cache-Control":"no-cache"},async:!0}).always(function(e,g,h){if("success"===g)switch(h.status){case 200:case 301:case 302:case 304:case 307:b._EPYTA_.adstxtVerify(e);
break;default:b._EPYTA_.adstxtVerify("")}else b._EPYTA_.adstxtVerify("")}):b._EPYTA_.adstxtVerify("")})};b._EPYTA_.adstxtVerify=function(f){a.ajax({type:"post",dataType:"json",timeout:12E4,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_adstxt_status_soft_ajax",current_adstxt:f},success:function(c){2==c.code?a(".nav-tab-adstxt").addClass("nav-tab-valid"):0>=c.code&&a(".nav-tab-adstxt").addClass("nav-tab-invalid");a(".adstxt-verify-message").html(c.message)},error:function(c,
d,e){a(".nav-tab-adstxt").addClass("nav-tab-invalid");a(".adstxt-verify-message").html("Could not validate ads.txt: "+e)},complete:function(){b._EPYTA_.adstxtLoading(!1)}})};b._EPYTA_.adstxtLoading=function(f){f?a(".nav-tab-adstxt").addClass("nav-tab-loading"):a(".nav-tab-adstxt").removeClass("nav-tab-loading")};b._EPYTA_.gbPreviewSetup=function(){b._EPADashboard_.loadYTAPI();b._EPADashboard_.apiInit();b._EPADashboard_.log("YT API GB");b._EPADashboard_.pageReady();"undefined"!==typeof a.fn.fitVidsEP&&
a("body").fitVidsEP()};b._EPYTA_.iabAdd=function(f,c,d){f=a('<div class="iab-cat-tag-button" data-tag="'+f+'">'+d+" : "+c+" &times;</div>");a(".iab-cat-tags-display").append(f);a(".iab-cat-tags-display .iab-cat-tag-button").sort(function(e,g){return a(e).text()>a(g).text()?1:-1}).appendTo(".iab-cat-tags-display")};a.fn.ytprefsFormJSON=function(){var f={},c=this.serializeArray();a.each(c,function(){f[this.name]?(f[this.name].push||(f[this.name]=[f[this.name]]),f[this.name].push(this.value||"")):f[this.name]=
this.value||""});return f};a(document).ready(function(){0===b.location.toString().indexOf("https://")&&(b._EPYTA_.wpajaxurl=b._EPYTA_.wpajaxurl.replace("http://","https://"));var f=b.addEventListener?"addEventListener":"attachEvent";(0,b[f])("attachEvent"==f?"onmessage":"message",function(c){var d="";try{if(0===c.data.indexOf("youtubeembedplus")&&0>c.data.indexOf("clientId=")){d=c.data.split("|")[1];0!==d.indexOf("[")&&(d="<p>"+d+"</p>");if(null===b.tinyMCE||null===b.tinyMCE.activeEditor||b.tinyMCE.activeEditor.isHidden())d=
d.replace("<p>","\n").replace("</p>","\n"),"function"===typeof QTags.insertContent?QTags.insertContent(d):send_to_editor(d);else{if(b._EPYTA_.mceBookmark)try{b.tinyMCE.activeEditor.selection.moveToBookmark(b._EPYTA_.mceBookmark)}catch(e){}"undefined"!==typeof b.tinyMCE.execInstanceCommand?b.tinyMCE.execInstanceCommand(b.tinyMCE.activeEditor.id,"mceInsertContent",!1,d):send_to_editor(d);setTimeout(function(){b._EPYTA_.mceBookmark=null},500)}tb_remove()}}catch(e){}},!1);a("body").on("click.tbyt","#ytprefs_wiz_button, .ytprefs_wiz_button_widget_text, .ytprefs-onboarding-launch",
function(){b._EPYTA_.widen_ytprefs_wiz()});a("body").on("click.tbyt","#ytprefs_wiz_button_vi, .ytprefs_wiz_button_vi_widget_text",function(){send_to_editor("<p>[embed-vi-ad]</p>")});a(b).on("resize",b._EPYTA_.widen_ytprefs_wiz);a(document).on("wp-before-tinymce-init.ytprefs-media_button",function(c,d){c=a(d.selector).closest(".wp-editor-wrap").find(".wp-media-buttons");c.find(".ytprefs_media_link").length||(c.append('<a href="'+encodeURI(b._EPYTA_.wizhref)+'" class="thickbox button ytprefs_media_link ytprefs_wiz_button_widget_text" title="Visual YouTube Search Tool and Wizard - For easier embedding"><span></span> YouTube</a>'),
b._EPYTA_.manage_options&&b._EPYTA_.vi_logged_in&&c.append('<a class="button ytprefs_vi_embed_shortcode" id="ytprefs_wiz_button_vi" title="Embed vi video ad"><span></span> Video Ad</a>'))});a(".wrap-vi-settings").length&&b._EPYTA_.adstxtLookup();a('.wrap section a[href^="#jump"]').on("click",function(c){c.preventDefault();c=a(this).attr("href");a('.nav-tab-wrapper a[href="'+c+'"], .nav-tab-wrapper a[rel="'+c+'"]').trigger("click")});a(".ytprefs-ajax-form").on("keypress",function(c){13==c.which&&(c.preventDefault(),
a(this).find(".ytprefs-ajax-form--submit:not([disabled])").trigger("click"))});a(".vi-cover-prompt-no").on("click",function(){a.ajax({type:"post",dataType:"json",timeout:12E4,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_hide_feature_ajax"},success:function(c){c&&"error"!==c.type?b!=b.top?b.location.reload():b.top.location.href=c.url:alertify.alert(c.message)},error:function(c,d,e){alertify.alert('Sorry, there was a network error. Please try again, or turn off this feature using the "Hide Monetize Feature" checkbox on the "Defaults" tab of the YouTube settings. If the issue persists, please contact ext@embedplus.com')},
complete:function(){}})});a(".vi-cover-prompt-yes").on("click",function(){a(".vi-cover-prompt, .vi-cover-clear").fadeOut(500);var c=new Date;c.setTime(c.getTime()+31536E6);document.cookie="vi_cover_prompt_yes=1;expires="+c.toUTCString()+";path="+b._EPYTA_.admin_url});a(".vi-cover-prompt-maybe").on("click",function(){var c=new Date;c.setTime(c.getTime()+31536E6);document.cookie="vi_cover_prompt_yes=1;expires="+c.toUTCString()+";path="+b._EPYTA_.admin_url;b!=b.top?b.location.reload():b.top.location.href=
b._EPYTA_.admin_url_ytprefs});1<a(".vi-demo-screen").length&&setInterval(function(){a(".vi-demo-screen-2").toggleClass("demo-hide");a(".vi-demo-mobile-caption").toggleClass("demo-hide")},2E4);a(".ytvi-step-1--submit-register").on("click",function(c){var d=a.trim(a(".ytvi-register-email").val());d.length?(a(".ytvi-step-1--submit-register").prop("disabled",!0),a(".ytvi-step-1").hide("fade",{},500,function(){a(".ytvi-step-2-loading").show("fade",{},500,function(){a.ajax({type:"post",dataType:"json",
timeout:12E4,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_cache_endpoints_ajax",email:d,domain:b.location.href},success:function(e){if("success"==e.type){a(".ytvi-step-2 .ytvi-registration iframe").attr("src",e.signupURLParams);setTimeout(function(){a(".ytvi-step-2-loading").hide("fade",{},500,function(){a(".ytvi-step-2").show("fade",{},500)})},3E3);e=new Date;var g=new Date;g.setTime(g.getTime()+31536E6);document.cookie="vi_signup_attempt="+e.toUTCString()+";expires="+
g.toUTCString()+";path="+b._EPYTA_.admin_url}else"error"===e.type&&(alertify.alert(e.message),b._EPYTA_.ytvi_cancel())},error:function(e,g,h){alertify.alert("Sorry, there was a network error. Please try again. If the issue persists, please contact ext@embedplus.com");b._EPYTA_.ytvi_cancel()},complete:function(){a(".ytvi-step-1--submit-register").prop("disabled",!1)}})})})):alertify.alert("Please enter your email address.")});a(".ytvi-registration--cancel").on("click",function(){b._EPYTA_.ytvi_cancel()});
a(".ytvi-step-1--confirm").on("change",function(){a(this).is(":checked")?a(".ytvi-step-1--submit-register").prop("disabled",!1):a(".ytvi-step-1--submit-register").prop("disabled",!0)});a(".ytvi-step-1--submit-login").on("click",function(c){var d=a.trim(a(".ytvi-login-email").val()),e=a.trim(a(".ytvi-password").val());c=d.length?"":"Please enter your email address. ";c+=e.length?"":"Please enter your vi dashboard password.";c.length?alertify.alert(c):(a(".ytvi-step-1--submit-login").prop("disabled",
!0),a(".ytvi-step-1").hide("fade",{},500,function(){a(".ytvi-login-loading").show("fade",{},500,function(){a.ajax({type:"post",dataType:"json",timeout:12E6,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_login_ajax",email:d,password:e},success:function(g){"error"===g.type?(alertify.alert(g.message),b._EPYTA_.ytvi_cancel()):a(".ytvi-login-loading").hide("fade",{},500,function(){document.cookie="vi_signup_attempt=; expires=Thu, 01 Jan 1970 00:00:01 GMT;";a(".ytvi-login-success-message").html(g.message);
a(".ytvi-login-success").show("fade",{},500,function(){})})},error:function(g,h,k){alertify.alert("Sorry, there was a network error. Please try again. If the issue persists, please contact ext@embedplus.com");b._EPYTA_.ytvi_cancel()},complete:function(){a(".ytvi-step-1--submit-login").prop("disabled",!1)}})})}))});a("a.vi-logged-in-goto").each(function(){(0<a(this).attr("href").indexOf(b.location.pathname+b.location.search)||0<b.location.search.indexOf("youtube-my-preferences"))&&a(this).removeAttr("target")});
a(".wrap-vi-settings").length&&(a(".vi-how-works").on("click",function(){var c=a(this).data("jump");a('.nav-tab-wrapper > a[href="'+c+'"]').trigger("click")}),a(document).on("click",".wrap-vi-settings .nav-tab-wrapper a",function(){$a=a(this);a(".wrap-vi-settings .nav-tab-wrapper a").removeClass("nav-tab-active");$a.addClass("nav-tab-active");a(".wrap-vi-settings section").hide();a(".wrap-vi-settings section").filter($a.attr("href")).fadeIn(200);return!1}),f=a(".iab-cat-tags").val(),0<f.length&&f.split(",").forEach(function(c){var d=
a('.iab-cat-child option[value="'+c+'"]').text(),e=a('.iab-cat-parent option[value="'+c.split("-")[0]+'"]').text();b._EPYTA_.iabAdd(c,d,e)}),a(".iab-cat-parent").on("change",function(){var c=a(this).val();a(".iab-cat-child").val(c);""==c?(a(".iab-cat-child-box").addClass("hidden"),a(".iab-cat-child-box select").prop("disabled",!0)):(a(".iab-cat-child-box").removeClass("hidden"),a(".iab-cat-child-box select").prop("disabled",!1),a(".iab-cat-child option").addClass("hidden"),a('.iab-cat-child option[value^="'+
c+'-"], .iab-cat-child option[value="'+c+'"], .iab-cat-child option[value=""]').removeClass("hidden"),a(".iab-cat-child-box select").val(""))}),a(".iab-cat-child").on("change",function(){var c=a(".iab-cat-tags").val()?a(".iab-cat-tags").val().split(","):[];if(4>c.length){var d=a(this).val(),e=a(this).find("option:selected").text(),g=a(".iab-cat-parent").find("option:selected").text();d&&-1==c.indexOf(d)&&(c.push(d),a(".iab-cat-tags").val(c.join(",")),b._EPYTA_.iabAdd(d,e,g))}else alertify.alert("You can choose up to 4 categories maximum. In order to add a new one, you must remove one of the existing ones.")}),
a(".iab-cat-tags-display").on("click",".iab-cat-tag-button",function(){var c=a(this),d=c.data("tag"),e=a(".iab-cat-tags").val()?a(".iab-cat-tags").val().split(","):[];e=e.filter(function(g){return g!=d});a(".iab-cat-tags").val(e.join(","));c.remove()}),b._EPYTA_.demoBackgroundColor(),b._EPYTA_.demoTextColor(),b._EPYTA_.demoFontFamily(),b._EPYTA_.demoFontSize(),a(b._EPYTA_.escId("vi_js_settings[backgroundColor]")).wpColorPicker({change:b._EPYTA_.demoBackgroundColor}),a(b._EPYTA_.escId("vi_js_settings[textColor]")).wpColorPicker({change:b._EPYTA_.demoTextColor}),
a(b._EPYTA_.escId("vi_js_settings[font]")).on("change",b._EPYTA_.demoFontFamily),a(b._EPYTA_.escId("vi_js_settings[fontSize]")).on("change",b._EPYTA_.demoFontSize),a.ajax({type:"post",dataType:"json",timeout:12E6,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_reports_ajax"},success:function(c){if("error"!==c.type&&c.data.mtdReport.length&&"undefined"!==typeof c.data.mtdReport[0].date){var d=c.data.mtdReport.map(function(g,h){return{x:moment(g.date,"YYYY-MM-DD").format(),
y:g.revenue}});a(".vi-total-earnings-num").text(b._EPYTA_.moneyFormat(c.data.netRevenue));var e=moment(d.length?d[0].x:new Date).format("MMMM YYYY");c=document.getElementById("vi-report-canvas").getContext("2d");d={type:"line",data:{datasets:[{label:e+" Earnings (USD)",backgroundColor:"#1193aa",borderColor:"#1193aa",fill:!1,data:d}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{deferred:{delay:1E3}},title:{display:!1},legend:{labels:{fontSize:15,fontColor:"#000000"}},tooltips:{position:"nearest",
mode:"index",intersect:!1,callbacks:{label:function(g,h){return b._EPYTA_.moneyFormat(g.yLabel)},title:function(g,h){return moment(g[0].xLabel).format("LL")}}},scales:{xAxes:[{type:"time",time:{unit:"day",unitStepSize:1,displayFormats:{day:"MMM DD"}},display:!0,scaleLabel:{display:!0,labelString:"Date",fontSize:15,fontColor:"#000000"},ticks:{major:{fontStyle:"bold",fontColor:"#000000"}}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Revenue",fontSize:15,fontColor:"#000000"},ticks:{callback:function(g,
h,k){return b._EPYTA_.moneyFormat(g)}}}]}}};Chart.defaults.global.defaultFontFamily="'Segoe UI', Roboto, 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif";new Chart(c,d)}else a(".vi-report-error").removeClass("hide"),a(".vi-report").addClass("hide")},error:function(c,d,e){alertify.alert("Sorry, there was a network error. Please try again. If the issue persists, please contact ext@embedplus.com")},complete:function(){}}),a(".ytvi-btn-logout").on("click",function(){var c="",d=a(".iab-cat-tags").val();
0<d.length&&1<d.split(",").length&&(c=" (Note: If you selected more than one video category, you must stay logged in to this settings page for your categories to automatically add variety to your ads)");alertify.confirm().set({title:"Logout of Monetize settings",message:"Logging out won't delete your settings. However, it will require you or any other admins to re-login to change vi ad settings in the future"+c+".<br><br>To actually disable monetization, make sure the '<strong>vi ads are: On/Off</strong>' button is set to '<strong>Off</strong>.'",
onok:function(){a.ajax({type:"post",dataType:"json",timeout:12E6,url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_logout_ajax"},success:function(e){"error"===e.type?alertify.alert(e.message):location.href=e.url},error:function(e,g,h){alertify.alert("Sorry, there was a network error. Please try again. If the issue persists, please contact ext@embedplus.com")},complete:function(){}})}}).show()}));a(".ytvi-btn-toggle").on("click",function(){var c=a(this);alertify.confirm().set({title:(c.hasClass("ytvi-btn-active")?
"Turn off":"Turn on")+" your vi ads",message:c.hasClass("ytvi-btn-active")?"Are you sure you would like to deactivate your video ads? Please note that your ads will no longer appear on the front end and your revenue will be paused. If you would like them to reappear later, simply click on this button again.":"Click OK to confirm turning on your vi ads. They will appear on your site according to your <strong>Placement</strong> settings.",onok:function(){a.ajax({type:"post",dataType:"json",timeout:12E6,
url:b._EPYTA_.wpajaxurl,data:{security:b._EPYTA_.security,action:"my_embedplus_vi_toggle_ajax"},success:function(d){"error"===d.type?alertify.alert(d.message):(c.find("strong").text(d.button_text),c.toggleClass("ytvi-btn-active ytvi-btn-inactive"),c.hasClass("ytvi-btn-active")?a(".ytvi-msg-congrats").show(200):a(".ytvi-msg-congrats").hide())},error:function(d,e,g){alertify.alert("Sorry, there was a network error. Please try again. If the issue persists, please contact ext@embedplus.com")},complete:function(){}})}}).show()});
a(".ytvi-intro-video-modal").on("click",function(c){c.preventDefault();c=Math.min(.8*document.body.clientWidth,800);var d=.5625*c;alertify.YoutubeDialog("BcrNPnWUkVI").set({frameless:!0,resizeable:!0}).resizeTo(c,d)});a("#vi_show_gdpr_authorization").on("change",function(){a(this).is(":checked")?a(".opt_vi_show_privacy_button").show(300):a(".opt_vi_show_privacy_button").hide(300)});a(".wrap-ytprefs-onboarding").length&&(a(".ytprefs-ob-nav-close").on("click",function(){b.parent.tb_remove();b.top.location.reload()}),
a(".ytprefs-ob-nav-prev").on("click",function(){b._EPYTA_.onboardPrev(a(this).closest(".ytprefs-ob-step"))}),a(".ytprefs-ob-filter li").hover(function(){var c="."+a(this).find('input[type="checkbox"]').data("obfilter")+"-icon";a(c).addClass("yob-icon-visible")},function(){var c="."+a(this).find('input[type="checkbox"]').data("obfilter")+"-icon";a(c).removeClass("yob-icon-visible")}),a('.ytprefs-ob-filter input[type="checkbox"]').on("change",function(){var c=a(this),d=c.data("obfilter"),e=a('.ytprefs-ob-filter input[type="checkbox"]:checked');
!e.length||1===e.length&&e.is('[data-obfilter="yob-monetize"]')?a(".ytprefs-ob-step1 .ytprefs-ob-nav-next").prop("disabled",!0):a(".ytprefs-ob-step1 .ytprefs-ob-nav-next").prop("disabled",!1);"yob-monetize"==d?a(".ytprefs-ob-step3 .ytprefs-ob-nav-ultimate, .ytprefs-ob-step3 .ytprefs-ob-nav-penultimate").toggleClass("ytprefs-ob-nav-hide"):c.is(":checked")?a(".ytprefs-ob-step2 ."+d).addClass(d+"-visible"):a(".ytprefs-ob-step2 ."+d).removeClass(d+"-visible")}),a(".ytprefs-ob-step1 .ytprefs-ob-nav-next").on("click",
function(){b._EPYTA_.onboardNext(a(this).closest(".ytprefs-ob-step"))}),a("#form-onboarding").on("submit",function(c){c.preventDefault();(b.tinyMCE||b.tinymce).triggerSave();var d=a(this);d.find(".ytprefs-ob-nav-next").prop("disabled",!0);c=d.ytprefsFormJSON();c.security=b._EPYTA_.security;a.ajax({type:"post",dataType:"json",timeout:3E4,url:b._EPYTA_?b._EPYTA_.wpajaxurl:ajaxurl,data:c,success:function(e){if("success"==e.type)b._EPYTA_.onboardNext(d.closest(".ytprefs-ob-step"))},error:function(e,g,
h){},complete:function(){d.find(".ytprefs-ob-nav-next").prop("disabled",!1)}})}),a(".ytprefs-ob-step3 .ytprefs-ob-nav-skip").on("click",function(){b._EPYTA_.onboardNext(a(this).closest(".ytprefs-ob-step"))}),a("#form-onboarding-apikey").on("submit",function(c){c.preventDefault();var d=a(this);d.find(".ytprefs-ob-nav-next").prop("disabled",!0);c=d.ytprefsFormJSON();c.security=b._EPYTA_.security;a.ajax({type:"post",dataType:"json",timeout:3E4,url:b._EPYTA_?b._EPYTA_.wpajaxurl:ajaxurl,data:c,success:function(e){if("success"==
e.type)if(d.find(".ytprefs-ob-nav-ultimate").hasClass("ytprefs-ob-nav-hide"))b._EPYTA_.onboardNext(d.closest(".ytprefs-ob-step"));else b.parent.tb_remove(),b.top.location.reload()},error:function(e,g,h){},complete:function(){d.find(".ytprefs-ob-nav-next").prop("disabled",!1)}})}))});a(b).on("load",function(){"1"!=_EPYTA_.onboarded&&a(".ytprefs-onboarding-launch").trigger("click")})})(window,jQuery);
